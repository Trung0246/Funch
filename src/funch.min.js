/*https://github.com/Trung0246/funch/ v0.5a*/

!function(n){function r(n,r){return void 0!==n?n:r}function t(n,r){switch(n){case 0:return Y(r);case 1:return Z(r);case 2:return J(r);case 3:return K(r);case 4:return r>0?J(r):Z(r)}}function e(n,r){var t=0>n?-1:1,e=0>r?-1:1,i=0,u=1,o=1,c=0;for(n=d.abs(n),r=d.abs(r);0!==n;){var a=Z(r/n),f=r%n,s=i-o*a;a=u-c*a,r=n,n=f,i=o,u=c,o=s,c=a}S[0]=r,S[1]=t*i,S[2]=e*u}function i(){var n,r=arguments[2],t=arguments.length-1;for(n=0;t>n;n++){var e=0|arguments[n];e=(65535&e)*P[0]+(((e>>>16)*P[0]&65535)<<16)&4294967295,e=e<<15|e>>>17,e=(65535&e)*P[1]+(((e>>>16)*P[1]&65535)<<16)&4294967295,r^=e,r=r<<13|r>>>19,r=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&r)+27492+(((r>>>16)+58964&65535)<<16)}return r^=t,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,((r^r>>>16)>>>0)/P[2]}function u(n){if(p.isNaN(n)||!p.isFinite(n))return NaN;if(0===n)return 0;if(n%1||2>n*n)return 1;if(0===n%2)return 2;if(0===n%3)return 3;if(0===n%5)return 5;for(var r=d.sqrt(n),t=7;r>=t;t+=30){if(0===n%t)return t;if(0===n%(t+4))return t+4;if(0===n%(t+6))return t+6;if(0===n%(t+10))return t+10;if(0===n%(t+12))return t+12;if(0===n%(t+16))return t+16;if(0===n%(t+22))return t+22;if(0===n%(t+24))return t+24}return n}function o(n){n*=10;var r=-27*n,t=-54*n;return n=(43200*r+2*r*r*r-360*r*t)/3456e3,t=(120*t-r*r)/14400,t=d.sqrt(n*n+t*t*t),$(-n+t,Q)+$(-n-t,Q)-r/120}function c(n,r){return h.distPnt(X.x,X.y,n.x,n.y,!0)-h.distPnt(X.x,X.y,r.x,r.y,!0)}function a(n,r){for(var t=n.length;;)if(r=(r+1)%t,n[r].flag)return r}function f(n,r,t){var e=n.length,i=[];for(r>t&&(t+=e);t>=r;r++)i.push(n[r%e]);return i}function s(n,r,t,e,i,u,o,c){if(t=h.distPnt(u.x,u.y,t.x,t.y,!0),t<c.dist){var a=1/h.distPnt(i.x,i.y,e.x,e.y,!0);u=-(i.y-e.y)*a,e=(i.x-e.x)*a,i=2*(n*u+r*e),c.dist=t,c.norm_x=u,c.norm_y=e,c.refl_x=-i*u+n,c.refl_y=-i*e+r,c.edge=o}}function l(n,r,t,e,i){var u=t.x-r.x,o=t.y-r.y,c=((n.x-r.x)*u+(n.y-r.y)*o)/(u*u+o*o);0>c||r.x===t.x&&r.y===t.y?(u=r.x,r=r.y):c>1?(u=t.x,r=t.y):(u=r.x+c*u,r=r.y+c*o),n=h.distPnt(u,r,n.x,n.y,!0),n<i.dist&&(i.dist=n,i.edge=e,i.point_x=u,i.point_y=r)}function x(n,r,t,e,i){var u=n.x-r.x,o=t.x-e.x,c=n.y-r.y,a=t.y-e.y,f=u*a-c*o;if(0===f)return null;r=n.x*r.y-n.y*r.x;var s=t.x*e.y-t.y*e.x;return f=1/f,i.x=(r*o-u*s)*f,i.y=(r*a-c*s)*f,o=d.min(t.x,e.x),a=d.max(t.x,e.x),f=d.min(t.y,e.y),t=d.max(t.y,e.y),t=o===a?f<=i.y&&i.y<=t:f===t?o<=i.x&&i.x<=a:!(o>i.x+1e-10||i.x-1e-10>a||f>i.y+1e-10||i.y-1e-10>t),!t||c>0&&i.y>n.y||0>c&&i.y<n.y||u>0&&i.x>n.x||0>u&&i.x<n.x?null:i}function y(n,r,t,e){var i=1e-10,u=!0,o=2===e?1:-1;if(V.length=0,E.length=0,I.length=0,"number"==typeof t||t instanceof p||(t=10),n===1/0*o)return NaN;for(n===-(1/0)*o&&(n=o*-p.MAX_VALUE/10),t>10&&(i=$(1e-32,t/32)),e=0;5>e;e++)n+=o*i,V.push(n),E.push(r(n));for(e=0;e<E.length;e++)I.push(d.round(E[e],t));for(e=1;e<I.length;e++)u=u&&I[e-1]===I[e];return!0===u?I[0]:NaN}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},h={},g={},d=n.Math,m=n.Boolean,p=n.Number;d.HALFPI=d.PI/2,d.TAU=2*d.PI,d.PHI=(1+d.sqrt(5))/2,d.SILVER=1+d.SQRT2,d.UPC=d.log(1+d.SQRT2)+d.SQRT2;for(var P=[3432918353,461845907,d.pow(2,32)],b=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],w=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],N=[.9999999999999999,2.224574423459406,2.444115549920689,1.7057986861852539,.8257463703357973,.28647031042892007,.07124513844341643,.012296749268608364,.001347817214557592,7263959403471071e-20,1,3.352953590554884,5.227518529742423,5.003720878235473,3.266590890998987,1.5255421920765353,.5185887413188858,.12747319185915415,.02185979575963238,.0023889438122503674,.00012875032817508128,.5641895835477563],L=[-39.6968302866538,220.946098424521,-275.928510446969,138.357751867269,-30.6647980661472,2.50662827745924,-54.4760987982241,161.585836858041,-155.698979859887,66.8013118877197,-13.2806815528857,-.00778489400243029,-.322396458041136,-2.40075827716184,-2.54973253934373,4.37466414146497,2.93816398269878,.00778469570904146,.32246712907004,2.445134137143,3.75440866190742,.02425],A=[1/2.75,2/2.75,1.5/2.75,2.5/2.75,2.25/2.75,2.625/2.75],T=[],q=[],V=[],E=[],I=[],R=[],M=[],C=[],S=[],_=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],j=.5*(d.sqrt(3)-1),k=(3-d.sqrt(3))/6,O=1/6,Q=1/3,U=d.PI/180,F=180/d.PI,B=d.sqrt(d.PI),D=d.sqrt(d.TAU),G=3*d.PI,H=d.sqrt(3)/2,W=4/3-1,X=void 0,z=[],Y=d.round,Z=d.floor,J=d.ceil,K=d.trunc,$=d.pow,nn=d.random,rn=0;6>rn;rn++)z.push({x:0,y:0,flag:!1});d.ln=d.log,d.log=function(n,t){return t=r(t,d.E),d.ln(n)/d.ln(t)},d.mod=function(n,r){return n-Z(n/r)*r},d.rem=function(n,r,t){if(t||(t=r,r=0),r>t){var e=t;t=r,r=e}return e=t-r,n=(n+r)%e-r,r>n&&(n+=e),n>t&&(n-=e),n},d.cycle=function(n,r){return n%=r,n>0?n:n+r},d.gamma=function(n,t){if(t=r(t,7),.5>n)return d.PI/d.sin(n*d.PI)/d.gamma(1-n);n--;for(var e=b[0],i=1;t+2>i;i++)e+=b[i]/(n+i);return i=n+t+.5,D*d.pow(i,n+.5)*d.exp(-i)*e},d.lnGamma=function(n){var r,t=0,e=1.000000000190015,i=(r=n)+5.5;for(i-=(n+.5)*d.ln(i);6>t;t++)e+=w[t]/++r;return d.ln(2.5066282746310007*e/n)-i},d.factorial=function(n){if(n++,n===Z(n))if(--n,n!==Z(n)||0>n||n>170)n=NaN;else if(0===n||1===n)n=1;else{for(var r=1,t=2;n>=t;t++)r*=t;n=r}else n=0>n?d.PI/(d.sin(d.PI*n)*d.gamma(1-n)):d.exp(d.lnGamma(n));return n},d.nCr=function(n,r){for(var t=1,e=0;r>e;e++)t*=(n-e)/(e+1);return t},d.nPr=function(n,r){for(var t=1,e=0;r>e;e++)t*=n-e;return t},d.pow=function(n,r){var t=$(n,r);if(p.isNaN(t)){var e=(t=0>n&&0>r)&&p.isEven(r)?NaN:$(d.abs(n),r);t=t&&e?-e:e}return t},d.sigmoid=function(n){return 1/(1+d.pow(d.E,-n))},d.pair=function(n,r){return.5*(n+r-2)*(n+r-1)+n},d.integral=function(n,t,e,i,u){i=r(i,1e-17),u=r(u,11);var o,c=$(2,-u);for(o=0;o<20*$(2,u);o++){var a=o*c,f=d.sinh(a);if(R[o]=d.tanh(d.HALFPI*f),M[o]=d.PI*d.cosh(a)/(d.cosh(d.PI*f)+1),d.abs(1-R[o])<i)break}i=o,f=0;var s=(t-n)/2;for(t=(t+n)/2,o=1;u>o;o++)for(n=0;i>n;n+=$(2,u-o))(0!==n%$(2,u-o+1)||1===o)&&(0===n?f+=M[0]*e(t):(a=s*R[n],f+=M[n]*(e(t-a)+e(t+a))));return 2*s*c*f},d.derivative=function(n,t,e,i,u){e=r(e,6),i=r(i,1e-15),u=r(u,1),C[0]=(t(n+u)-t(n-u))/(2*u);for(var o=1;e-1>=o;o++){C[o]=0;var c=C[0],a=u;u*=.5,C[0]=(t(n+u)-t(n-u))/a;for(var f=4,s=1;o>=s;s++,f*=4)a=C[s],C[s]=(f*C[s-1]-c)/(f-1),c=a;if(d.abs(C[o]-C[o-1])<i)return C[o]}return NaN},d.limit=function(n,r,t,e){"number"==typeof e||e instanceof p||(e=10);var i=t(r);switch(n){case 1:return y(r,t,e,1);case 2:return y(r,t,e,2);default:if(!p.isNaN(i))return i;if(!p.isNaN(r)){if(1/0===r)return y(r,t,e,1);if(-(1/0)===r)return y(r,t,e,2);if(n=y(r,t,e,1),r=y(r,t,e,2),n===r)return n}}return NaN},d.solve=function(n,t,e,i,u){n=r(n,-100),t=r(t,100);var o=0,c=e(n);if(0===c*e(t))return 0===c?n:t;var a=e((t+n)/2);for(i=r(i,1e-17),u=r(u,1e7);t-n>i&&u>o;){if(0>c*a)t=(t+n)/2;else if(c*a>0)n=(t+n)/2,c=e(n);else if(0===c*e(t))return 0===c?n:t;a=e((t+n)/2),o++}return 0>c*e(t)?(t+n)/2:NaN},d.rational=function(n,t){t=r(t,0);var e=0,i=0,u=[n,1],o=1;do{var c=Y(n*o);c=n-c/o,1===o&&(e=o,i=c),d.abs(c)<d.abs(i)&&(e=o,i=c),u[0]=Y(n*e),u[1]=e,o++}while(0!==t?t>=o:u[0]/u[1]!==n);return 0===u[0]&&0===u[1]&&(u[0]=n,u[1]=1),u},d.pdf=function(n,r,t,e){return t*=D,d.exp(-d.pow(e-n,2)/(2*r))/t},d.cdf=function(n,r,t){return.5*d.erfc(-(t-n)/(r*d.SQRT2))},d.ppf=function(n,r,t){return n-r*d.SQRT2*d.ierfc(2*t)},d.erf=function(n){for(var r=1,t=1,e=n,i=1;50>i;i++)r*=i,t*=-1,e+=t*$(n,2*i+1)/(r*(2*i+1));return 2*e/B},d.erfc=function(n){return 1-d.erf(n)},d.ierf=function(n){return d.iNorm((n+1)/2)/d.SQRT2},d.ierfc=function(n){return-d.iNorm(.5*n)/d.SQRT2},d.erfcx=function(n){if(0>n)return-6.1>n?2*d.exp(n*n):2*d.exp(n*n)-d.erfcx(-n);if(n>50){var r=n*n;return n>5e7?N[21]/n:N[21]*(r*(r+4.5)+2)/(n*(r*(r+5)+3.75))}return(N[0]+n*(N[1]+n*(N[2]+n*(N[3]+n*(N[4]+n*(N[5]+n*(N[6]+n*(N[7]+n*(N[8]+n*N[9])))))))))/(N[10]+n*(N[11]+n*(N[12]+n*(N[13]+n*(N[14]+n*(N[15]+n*(N[16]+n*(N[17]+n*(N[18]+n*(N[19]+n*N[20]))))))))))},d.iNorm=function(n){if(n<L[21]){var r=d.sqrt(-2*d.ln(n));n=r=(((((L[11]*r+L[12])*r+L[13])*r+L[14])*r+L[15])*r+L[16])/((((L[17]*r+L[18])*r+L[19])*r+L[20])*r+1)}else{r=n-.5;var t=r*r;r=(((((L[0]*t+L[1])*t+L[2])*t+L[3])*t+L[4])*t+L[5])*r/(((((L[6]*t+L[7])*t+L[8])*t+L[9])*t+L[10])*t+1),n=r-D*(.5*d.erfcx(-r/d.SQRT2)-d.exp(.5*r*r)*n)}return n},d.kelly=function(n,r){return(r*(n+1)-1)/n},d.round=function(n,r,t){return d.adjust(0,n,r,t)},d.floor=function(n,r,t){return d.adjust(1,n,r,t)},d.ceil=function(n,r,t){return d.adjust(2,n,r,t)},d.trunc=function(n,r,t){return d.adjust(3,n,r,t)},d.away=function(n,r,t){return d.adjust(4,n,r,t)},d.round2=function(n,r,t){return d.adjust2(0,n,r,t)},d.floor2=function(n,r,t){return d.adjust2(1,n,r,t)},d.ceil2=function(n,r,t){return d.adjust2(2,n,r,t)},d.trunc2=function(n,r,t){return d.adjust2(3,n,r,t)},d.away2=function(n,r,t){return d.adjust2(4,n,r,t)},d.adjust=function(n,e,i,u){return i=r(i,0),u=r(u,10),i=d.pow(u,i),t(n,e*i)/i},d.adjust2=function(n,e,i,u){i=r(i,0),u=r(u,10),u=r(u,10);var o=d.abs(e);return o=10===u?d.log10(o):2===u?d.exp(o):d.log(o,u),o=Z(o-i+1),i=d.pow(u,d.abs(o)),0>o?t(n,e*i)/i:t(n,e/i)*i},d.correct=function(n,t){return t=r(t,13),d.round(n,t)===d.round(n,t-1)?d.round(n,t):n},d.snap=function(n,t,e,i,u,o){return i=r(i,0),0===e?t:(t=e*d.adjust(n,(t-i)/e,u,o),i+t)},d.snap2=function(n,t,e,i,u,o){return i=r(i,0),0===e?t:(t=e*d.adjust2(n,(t-i)/e,u,o),i+t)},d.shear=function(n){return n=d.abs(n),n-Z(n)},d.precision=function(n){if(!p.isFinite(n))return 0;for(var r=1,t=0;Y(n*r)/r!==n;)r*=10,t++;return t},d.order=function(n){return Z(d.ln(d.abs(n))/d.LN10)},d.ramp=function(n){return n>0?n:0},d.heaviside=function(n,r){if(p.isNaN(r))return NaN;if(r>0)return 1;if(0===r)switch(n){case 1:break;case 2:return 1;default:return.5}return 0},d.haar=function(n){return.5>n&&n>=0?1:1>=n&&n>.5?-1:0},d.rect=function(n){return n=d.abs(n),n>.5?0:.5===n?.5:.5>n?1:NaN},d.tri=function(n){return n=d.abs(n),1>n?1-n:0},d.fold=function(n,r){return n?r>0?2*r-1:2*d.abs(r):0>r?2*d.abs(r)-1:2*r},d.one=function(n){return Y(n)%2*2-1},d.range=function(n,t,e,i,u,o){return o=r(o,1),i&&u?n>=t*o&&e*o>=n:i?n>=t*o&&e*o>n:u?n>t*o&&e*o>=n:n>t*o&&e*o>n},d.compare=function(n,t,e,i,u){return u=r(u,1),i?e?t*u>=n:t*u>n:e?n>=t*u:n>t*u},d.clamp=function(n,r,t){return r>n?n=r:n>t&&(n=t),n},d.wrap=function(n,r,t){return t-=r,n=(n-r)%t,0>n&&(n+=t),n+r},d.bounce=function(n,r,t){t-=r;var e=2*t;return n=(n-r)%e,0>n&&(n+=e),n>t&&(n=e-n),n+r},d.map=function(n,r,t,e,i){return e+(n-r)/(t-r)*(i-e)},d.norm=function(n,r,t){return(n-r)/(t-r)},d.lerp=function(n,r,t){return(1-n)*r+n*t},d.gcd=function(){if(0===arguments.length)return NaN;S[0]=arguments[0];for(var n=1;n<arguments.length;n++)e(S[0],arguments[n]);return[].concat(S)},d.lcm=function(){if(0===arguments.length)return NaN;var n=arguments[0];S[0]=n;for(var r=1;r<arguments.length;r++)e(n,arguments[r]),n=n*arguments[r]/S[0];return n},d.factor=function(n){var r,t=[];for(r=2;n>=r;r++)for(;0===n%r;)t.push(r),n/=r;return t},d.divisor=function(n){for(var r=p.isEven(n),t=r?1:2,e=[1,n],i=r?2:3;$(i,2)<=n;i+=t)0===n%i&&(e.push(i),r=n/i,r!==i&&e.push(r));return e},d.random=function(n,t,e,u,o,c){if(u){T[0]="number"==typeof u?u:0|u[0],T[1]=0|u[1],T[2]=0|u[2],T[3]=0|u[3],T[4]=0|u[4];var a=T[0],f=T[1],s=T[2],l=T[3];u=(l>>>0)+(f>>>0);var x=s+a+(u/2>>>31)>>>0;T[0]=s,T[1]=l,a^=a<<23|(-512&f)>>>9,f^=f<<23;var y=a^s^a>>>18^s>>>5;a=f^l^(f>>>18|(262143&a)<<14)^(l>>>5|(31&s)<<27),T[2]=y,T[3]=a,T[5]=x,T[6]=u>>>0,u=i(T[5],T[6],T[4])}else u=nn();return n=r(n,0),t=r(t,1),n>t?null==o?0:o:n==t?null==c?n:c:(e?(n=J(n),t=Z(t),u=Z(u*(t-n+1))+n):u=u*(t-n)+n,u)},d.randomTri=function(n,t,e,i){e=r(e,0),i=d.random(0,1,!1,i);var u=t-n;return i>(e-n)/u?t-d.sqrt((1-i)*u*(t-e)):n+d.sqrt(i*u*(e-n))},d.randomCirc=function(n,r,t,e,i){return n=d.random(n,r,!1,i),e-=t,e*=e,d.sqrt(e-e*n*n)+t},d.noise=function(n,r,t,e){var i,u,o=0;if("number"==typeof e){var c=(r+t+e)*Q,a=Z(r+c),f=Z(t+c),s=Z(e+c);c=(a+f+s)*O,r-=a-c,t-=f-c;var l=e-(s-c);if(r<t)l>t?(u=e=0,x=1,i=0,v=y=1):l>r?(e=0,u=1,i=x=0,v=y=1):(e=0,u=1,x=0,y=i=1,v=0);else if(t<l)l>r?(u=e=0,x=1):(e=1,x=u=0),i=1,y=0,v=1;else{e=1;var x=u=0,y=i=1,v=0}a&=255,f&=255,s&=255,c=.6-r*r-t*t-l*l;var h=n[a+n[f+n[s]]];c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],r,t));var g=r-e+O,m=t-u+O;return c=l-x+O,c=.6-g*g-m*m-c*c,h=n[a+e+n[f+u+n[s+x]]],c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],g,m)),g=r-i+2*O,m=t-y+2*O,c=l-v+2*O,c=.6-g*g-m*m-c*c,h=n[a+i+n[f+y+n[s+v]]],c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],g,m)),g=r-1+3*O,m=t-1+3*O,c=l-1+3*O,c=.6-g*g-m*m-c*c,h=n[a+1+n[f+1+n[s+1]]],c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],g,m)),32*o}return e=(r+t)*j,a=Z(r+e),f=Z(t+e),u=(a+f)*k,r-=a-u,t-=f-u,r>t?(e=1,u=0):(e=0,u=1),a&=255,f&=255,c=.5-r*r-t*t,h=n[a+n[f]],c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],r,t)),g=r-e+k,m=t-u+k,c=.5-g*g-m*m,h=n[a+e+n[f+u]],c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],g,m)),g=r-1+2*k,m=t-1+2*k,c=.5-g*g-m*m,h=n[a+1+n[f+1]],c>=0&&(c*=c,o+=c*c*d.dotVec(_[h][0],_[h][1],g,m)),70*o},h.normRad=function(n){return n=h.fullRad(n),n>d.PI&&(n-=d.TAU),n},h.toRad=function(n){return n*U},h.fullRad=function(n){return(d.TAU+n%d.TAU)%d.TAU},h.normDeg=function(n){return n=h.fullDeg(n),n>180&&(n-=360),n},h.toDeg=function(n){return n*F},h.fullDeg=function(n){return(360+n%360)%360},h.getAngle=function(n,r,t,e){return d.atan2(e-r,t-n)},h.relfAngle=function(n,r){return 2*r-n},h.diffAngle=function(n,r){return d.PI-(n-r+G)%d.TAU},h.isBetwAngle=function(n,r,t){return n=h.fullRad(n),r=h.fullRad(r),t=h.fullRad(t),t>r?n>=r&&t>=n:n>=r||t>=n},h.colliAnglePnt=function(n,r,t,e,i,u){return h.isBetwAngle(h.getAngle(t,e,i,u),n,r)},h.distPnt=function(n,r,t,e,i){return n-=t,r-=e,r=n*n+r*r,i&&(r=d.sqrt(r)),r},h.polarDistPnt=function(n,r,t,e,i){return n=n*n+t*t-2*n*t*d.cos(e-r),i&&(n=d.sqrt(n)),n},h.manDistPnt=function(n,r,t,e){return d.abs(n-t)+d.abs(r-e)},h.chevDistPnt=function(n,r,t,e){return d.max(d.abs(n-t),d.abs(r-e))},h.rotPnt=function(n,r,t,e,i,u){return u=d.sin(u),i=d.cos(i),t-=n,e-=r,{x:t*i-e*u+n,y:t*u+e*i+r}},h.anglePnt=function(n,r,t,e,i,u){return n-=i,r-=u,t-=i,e-=u,d.acos(d.dotVec(n,r,t,e)/d.sqrt((n*n+r*r)*(t*t+e*e)))},h.cntrPnt=function(n,r,t,e,i){var u=h.distPnt(t,e,n,r,!0),o=(n+t)/2,c=(r+e)/2;return i=d.sqrt(i*i-$(u/2,2)),r=i*(r-e)/u,n=i*(t-n)/u,{x1:o+r,y1:c+n,x2:o-r,y2:c-n}},h.cmpPnt=function(n,t,e,i,u){return u=r(u,1e-10),d.abs(n-e)>u?n>e?1:-1:d.abs(t-i)>u?t>i?1:-1:0},h.slopeLine=function(n,r,t,e){return(e-r)/(t-n)},h.stdLine=function(n,r,t,e){var i={};return 0===t-n?(i.a=-1,i.b=0,i.c=n):(n=h.slopeLine(n,r,t,e),i.a=n,i.b=-1,i.c=-t*n+e),i},h.distLinePnt=function(n,r,t,e,i,u,o,c){return n?d.abs((i-t)*u-(e-r)*o+e*t-i*r)/h.distPnt(r,t,e,i,!0):(n=h.distPnt(r,t,e,i,!1),0===n?h.distPnt(u,o,r,t,c):(n=d.dotVec(u-r,o-t,e-r,i-t)/n,n=d.max(0,d.min(1,n)),h.distPnt(u,o,r+n*(e-r),t+n*(i-t),c)))},h.distLine=function(n,r,t,e,i,u,o,c,a,f){return r=h.distLinePnt(n,u,o,c,a,r,t,f),r>0?(n=h.distLinePnt(n,u,o,c,a,e,i,f),n>r?r:n):0},h.intrLine=function(n,r,t,e,i,u,o,c){var a={x:null,y:null,onLine1:!1,onLine2:!1},f=t-n,s=e-r,l=o-i,x=c-u,y=r-u,v=n-i,g=x*f-l*s;return 0===g?(p.isNaN(h.slopeLine(l*s,f*y,f*x,s*v))&&p.isNaN(h.slopeLine(f*x,x*v,l*s,l*y))&&(a.onLine1=h.colliLinePnt(!0,n,r,t,e,i,u)||h.colliLinePnt(!0,n,r,t,e,o,c),a.onLine2=a.onLine1),a):(t=f*y-s*v,y=(l*y-x*v)/g,v=t/g,a.x=n+y*f,a.y=r+y*s,y>=0&&1>=y&&(a.onLine1=!0),v>=0&&1>=v&&(a.onLine2=!0),a)},h.intrLineCirc=function(n,r,t,e,i,u,o){var c={x:null,y:null,x1:null,y1:null,x2:null,y2:null,onLine:!1,onLine1:!1,onLine2:!1},a=h.distPnt(n,r,t,e,!0),f=(t-n)/a;a=(e-r)/a;var s=f*(i-n)+a*(u-r);return c.x=s*f+n,c.y=s*a+r,i=h.distPnt(c.x,c.y,i,u,!0),o>i?(o=d.sqrt(o*o-i*i),c.x1=(s-o)*f+n,c.y1=(s-o)*a+r,c.onLine1=h.colliLinePnt(!0,n,r,t,e,c.x1,c.y1),c.x2=(s+o)*f+n,c.y2=(s+o)*a+r,c.onLine2=h.colliLinePnt(!0,n,r,t,e,c.x2,c.y2)):i===o?c.onLine=!0:(c.x=null,c.y=null),c},h.sideLine=function(n,r,t,e,i,u){return d.crossVec(t-n,e-r,i-n,u-r)},h.onLine=function(n,r,t,e,i){return{x:n+(t-n)*i,y:r+(e-r)*i}},h.colliLinePnt=function(n,t,e,i,u,o,c,a){return a=r(a,1e-10),t-=o,e-=c,i=o-i,u=c-u,c=d.crossVec(t,e,i,u),!(-a>c||c>a||0>d.dotVec(t,e,i,u)&&n)},h.getXLine=function(n,r,t,e,i){return r=e-r,0===r?null:t+(i-e)/(r/(t-n))},h.getYLine=function(n,r,t,e,i){return n=t-n,0===n?null:e+(e-r)/n*(i-t)},h.colliRayRect=function(n,r,t,e,i,u,o,c){return t=1/t,e=1/e,i=(i-n)*t,n=(o-n)*t,t=d.min(i,n),o=d.max(i,n),i=(u-r)*e,n=(c-r)*e,t=d.max(t,d.min(i,n)),o=d.min(o,d.max(i,n)),o>d.max(t,0)},h.colliArcCircPnt=function(n,r,t,e,i,u,o,c,a){return n-=t,r-=e,!d.clockWiseVec(u,o,n,r)&&d.clockWiseVec(c,a,n,r)&&h.colliCirc(0,0,0,n,r,i)},h.colliCircPnt=function(n,t,e,i,u,o){return o=r(o,1e-10),n=h.distPnt(n,t,e,i,!1),u*=u,u>n?1:d.abs(n-u)<o?0:-1},h.colliCirc=function(n,r,t,e,i,u){return n=e-n,r=i-r,t+=u,t*t>=n*n+r*r},h.colliCircRect=function(n,r,t,e,i,u,o){return h.distPnt(d.clamp(n,e,u),d.clamp(r,i,o),n,r,!1)<=t*t},h.intrCirc=function(n,r,t,e,i,u){var o=h.distPnt(n,r,e,i,!0);u=(t*t-u*u+o*o)/(2*o);var c=u/o;if(u>t)return NaN;var a=n+(e-n)*c,f=r+(i-r)*c;return t=d.sqrt(t*t-u*u)/o,u=i-r,c=e-n,[a-t*u,f+t*c,a+t*u,f-t*c]},h.randomCirc=function(n,r,t,e){var i=nn(),u=nn();return e&&i>u&&(e=u,u=i,i=e),d.rec(n,r,u*t,d.TAU*i/u)},h.onElli=function(n,r,t,e,i,u){var o=d.sin(i),c=d.sin(u);return i=d.cos(i),u=d.cos(u),{x:t*u*i-e*c*o+n,y:e*c*i+t*u*o+r}},h.colliElliPnt=function(n,r,t,e,i,u,o){var c=d.cos(i);return i=d.sin(i),u-=n,o-=r,n=c*u+i*o,i=i*u-c*o,c=n,1>=4*c*c/(t*t)+4*i*i/(e*e)},h.intrElli=function(n,r,t,e,i,u,o,c,a,f){var s=d.cos(i),l=d.sin(i),x=d.cos(f),y=d.sin(f),v=d.cos(i-f),h=d.sin(i-f);i=e*(-n*s+u*s-r*l+o*l),f=c*e*v;var g=e*a*h;l=t*(-r*s+o*s+n*l-u*l);var m=-t*c*h;v*=t*a,s=t*e,t=i*i,e=f*f,n=l*l,r=m*m,s*=s,h=4*i*g;var p=4*m*v,P=4*f*g,b=4*l*v,w=2*i*f;for(l=2*l*m,i=[],m=t-w+e+n-l+r-s,q.length=0,f=(h-P+b-p)/m,g=(2*t-2*e+4*g*g+2*n-2*r+4*v*v-2*s)/m,v=(h+P+b+p)/m,h=(t+w+e+n+l+r-s)/m,e=f*f,r=2*g,n=4*h,t=0,p=v*f-n,s=-g,s/=1,p/=1,P=s*s,l=(3*p-P)/9,h=(9*s*p-27*(4*g*h-v*v-e*h)-2*P*s)/54,p=l*l*l,P=p+h*h,0>P?h=2*d.sqrt(-l)*d.cos(d.acos(h/d.sqrt(-p))/3)-s/3:(p=d.sqrt(P),l=d.cbrt(h+p),h=d.cbrt(h-p),h=-s/3+l+h),P=.75*e,b=e/4-g+h,p=d.sqrt(b),s=-f/4,l=p/2,0===b?(r=P-r,f=2*d.sqrt(h*h-n)):(r=P-b-r,f=(4*f*g-8*v-e*f)/(4*p)),g=r+f,v=r-f,r=s+l,g>=0&&(f=d.sqrt(g)/2,q[t++]=r+f,q[t++]=r-f),r=s-l,v>=0&&(f=d.sqrt(v)/2,q[t++]=r+f,q[t++]=r-f),f=t,v=0;f>v;++v)t=2*d.atan(q[v]),g=d.cos(t)*c,t=d.sin(t)*a,i[2*v]=u+g*x-t*y,i[2*v+1]=o+g*y+t*x;return i},h.intrElliLine=function(n,r,t,e,i,u,o,c,a){var f=d.sin(i);i=d.cos(i);var s=e*((-n+u)*i+(-r+o)*f),l=t*((-r+o)*i+(n-u)*f),x=e*((-n+c)*i+(-r+a)*f);return n=t*((-r+a)*i+(n-c)*f),t*=e,e=s*s,r=s*x,s=l*l,l*=n,x=e-2*r+x*x+s-2*l+n*n,l=-2*e+2*r-2*s+2*l,n=l*l-4*x*(-t*t+e+s),s=[],0===n?(n=-l/(2*x),s[0]=(1-n)*u+n*c,s[1]=(1-n)*o+n*a):n>0&&(t=d.sqrt(n),e=0,n=(-l-t)/(2*x),s[0]=(1-n)*u+n*c,s[1]=(1-n)*o+n*a,e++,n=(-l+t)/(2*x),s[2*e]=(1-n)*u+n*c,s[2*e+1]=(1-n)*o+n*a),s},h.boundElli=function(n,r,t,e,i){var u=d.atan(-e*d.tan(i)/t),o=d.atan(e*d.cot(i)/t),c=d.sin(i);return i=d.cos(i),u=d.abs(t*d.cos(u)*i-e*d.sin(u)*c),o=d.abs(e*d.sin(o)*i+t*d.cos(o)*c),{xMin:-u+n,yMin:-o+r,xMax:u+n,yMax:o+r}},h.randomElli=function(n,r,t,e,i,u){var o=nn(),c=nn();return u&&o>c&&(u=c,c=o,o=u),h.onElli(n,r,c*t,c*e,i,d.TAU*o/c)},h.distElliPnt=function(n,r,t){return n=1/d.sqrt(d.pow(d.sin(t)/r,2)+d.pow(d.cos(t)/n,2)),p.isFinite(n)?n:0},h.centroidTri=function(n,r,t,e,i,u){return{x:(n+t+i)/3,y:(r+e+u)/3}},h.equilTri=function(n,r,t){var e=r+t*H;return t/=2,{x1:n,y1:r,x2:n+t,y2:e,x3:n-t,y3:e}},h.rightTri=function(n,r,t,e){return{x1:n,y1:r,x2:n,y2:r-e,x3:n+t,y3:r}},h.crcmCntrTri=function(n,r,t,e,i,u){n-=i,r-=u,t-=i;var o=e-u;e=n*n+r*r;var c=t*t+o*o;return o=2*d.crossVec(n,r,t,o),{x:i-d.crossVec(r,e,t,c)/o,y:u+d.crossVec(n,e,t,c)/o}},h.crcmCircTri=function(n,r,t,e,i,u){var o=t-n,c=e-r,a=i-n,f=u-r,s=o*(n+t)+c*(r+e),l=a*(n+i)+f*(r+u);return e=2*(o*(u-e)-c*(i-t)),t={},t.x=(f*s-c*l)/e,t.y=(o*l-a*s)/e,n=t.x-n,r=t.y-r,t.r=2*d.sqrt(n*n+r*r),t},h.inCircTri=function(n,r,t,e,i,u){var o=h.distPnt(i,u,t,e,!0),c=h.distPnt(n,r,i,u,!0),a=h.distPnt(t,e,n,r,!0),f=o+c+a,s=(a+o+c)/2;return{x:(n*o+t*c+i*a)/f,y:(r*o+e*c+u*a)/f,r:d.sqrt(s*(s-a)*(s-o)*(s-c))/s}},h.colliTriPnt=function(n,r,t,e,i,u,o,c){var a=r*i-n*u+(u-r)*o+(n-i)*c;return o=n*e-r*t+(r-e)*o+(t-n)*c,0>a!=0>o?!1:(n=-e*i+r*(i-t)+n*(e-u)+t*u,0>n&&(a=-a,o=-o,n=-n),a>0&&o>0&&n>=a+o)},h.areaTri=function(n,r,t,e,i,u){return d.abs(((i-n)*(e-r)-(t-n)*(u-r))/2)},h.randomTri=function(n,r,t,e,i,u){var o=d.sqrt(nn()),c=nn(),a=1-o,f=o*(1-c);return o*=c,{x:a*n+f*t+o*i,y:a*r+f*e+o*u}},h.colliRectPnt=function(n,r,t,e,i,u){return t-n>0&&e-r>0?!(n>i||i>t||r>u||u>e):!1},h.colliRect=function(n,r,t,e,i,u,o,c){return 0<d.abs(t-n)&&0<d.abs(e-r)&&0<d.abs(o-i)&&0<d.abs(c-u)?!(i>t||u>e||n>o||r>c):!1},h.intrRect=function(n,r,t,e,i,u,o,c){return h.colliRect(n,r,t,e,i,u,o,c)?{xMin:d.max(n,i),yMin:d.max(r,u),xMax:d.min(t,o),yMax:d.min(e,c)}:null},h.randomRect=function(n,r,t,e){return{x:n+nn()*d.abs(t-n),y:r+nn()*d.abs(e-r)}},h.colliPolyPnt=function(n,r,t){var e,i=!1,u=-2;for(e=n.length-2;(u+=2)<n.length;e=u){var o=n[u],c=n[u+1],a=n[e];e=n[e+1],(t>=c&&e>t||t>=e&&c>t)&&(a-o)*(t-c)/(e-c)+o>r&&(i=!i)}return i},h.colliPolyCirc=function(n,r,t,e){if(h.colliPolyPnt(n,r,t))return!0;for(var i=2;i<n.length;i+=2)if(h.distLinePnt(!1,n[i-2],n[i-1],n[i],n[i+1],r,t,!1)<e*e)return!0;return h.distLinePnt(!1,n[n.length-2],n[n.length-1],n[0],n[1],r,t,!1)<e*e},h.colliPoly=function(n,r){var t=h.boundPoly(n),e=h.boundPoly(r);if(h.colliRect(t.xMin,t.yMin,t.xMax,t.yMax,e.xMin,e.yMin,e.xMax,e.yMax))for(e=n.length>r.length?n.length:r.length,t=0;e>t;t+=2)if(h.colliPolyPnt(r,n[t],n[t+1])&&t<=n.length||h.colliPolyPnt(n,r[t],r[t+1])&&t<=r.length)return!0;return!1},h.isSimplePoly=function(n){var r=n.length>>1;if(4>r)return!0;for(var t,e,i,u,o,c,a,f,s=0;r>s;s++){t=n[2*s],e=n[2*s+1],s==r-1?(i=n[0],u=n[1]):(i=n[2*s+2],u=n[2*s+3]);for(var l=0;r>l;l++)if(!(2>d.abs(s-l)||l===r-1&&0===s||s===r-1&&0===l)&&(o=n[2*l],c=n[2*l+1],l==r-1?(a=n[0],f=n[1]):(a=n[2*l+2],f=n[2*l+3]),o=h.intrLine(t,e,i,u,o,c,a,f),o.onLine1&&o.onLine2))return!1}return!0},h.isConvexPoly=function(n){if(6>=n.length)return!1;var r=h.isClockWisePoly(n),t=h.sideLine(n[n.length-3],n[n.length-2],n[0],n[1],n[2],n[3]);t=t>0||0>d.abs(t);for(var e=2;e<n.length-2;e+=2){var i=h.sideLine(n[e-2],n[e-1],n[e],n[e+1],n[e+2],n[e+3]);if((r?i>0:0>i)!==t)return!0}return!1},h.isClockWisePoly=function(n){for(var r,t=0,e=0,i=void 0,u=0;u<n.length;u+=2)r=(u+2)%n.length,r=d.atan2(n[r+1]-n[u+1],n[r]-n[u]),0===u?i=r:(r-=i,e+=h.normRad(r-t),t=r);return e+=h.normRad(-t),e>=0},h.boundPoly=function(n){for(var r,t,e=p.MAX_SAFE_INTEGER,i=p.MAX_SAFE_INTEGER,u=p.MIN_SAFE_INTEGER,o=p.MIN_SAFE_INTEGER,c=0;c<n.length;c+=2)r=n[c],t=n[c+1],e=d.min(e,r),i=d.min(i,t),u=d.max(u,r),o=d.max(o,t);return{xMin:e,yMin:i,xMax:u,yMax:o}},h.triPoly=function(n){var r,t=n.length>>1;if(3>t)return[].concat(n);var e=[],i=[];for(r=0;t>r;r++)i.push(r);for(r=0;t>3;){var u=i[(r+0)%t],o=i[(r+1)%t],c=i[(r+2)%t],a=n[2*u],f=n[2*u+1],s=n[2*o],l=n[2*o+1],x=n[2*c],y=n[2*c+1],v=!1;if(0<=h.sideLine(a,f,s,l,x,y)){v=!0;for(var g=0;t>g;g++){var d=i[g];if(d!=u&&d!=o&&d!=c&&h.colliTriPnt(a,f,s,l,x,y,n[2*d],n[2*d+1])){v=!1;break}}}if(v)e.push(u,o,c),i.splice((r+1)%t,1),t--,r=0;else if(r++>3*t)break}return e.push(i[0],i[1],i[2]),e},h.slicePoly=function(n,t,e,i,u,o){var s;if(o=r(o,1e-10),o*=o,h.colliPolyPnt(n,t,e)||h.colliPolyPnt(n,i,u))return[n.slice(0)];var l={x:t,y:e,flag:!1};for(t=[],e=[],s=0;s<n.length;s+=2)e.push({x:n[s],y:n[s+1],flag:!1});for(s=0;s<e.length;s++){var x=h.intrLine(l.x,l.y,i,u,e[s].x,e[s].y,e[(s+1)%e.length].x,e[(s+1)%e.length].y);x.flag=!1;var y=t[0]||{},v=t[t.length-1]||{};x.onLine1&&x.onLine2&&(!y.onLine1&&!y.onLine2||h.distPnt(x.x,x.y,y.x,y.y,!1)>o)&&(!v.onLine1&&!v.onLine2||h.distPnt(x.x,x.y,v.x,v.y,!1)>o)&&(x.flag=!0,t.push(x),e.splice(s+1,0,x),s++)}if(2>t.length)return[n.slice(0)];for(X=l,t.sort(c),n=[],l=0;0<t.length&&(s=t[0],i=t[1],u=e.indexOf(s),o=e.indexOf(i),x=!1,a(e,u)==o?x=!0:(s=t[1],i=t[0],u=e.indexOf(s),o=e.indexOf(i),a(e,u)==o&&(x=!0)),x?(l--,x=f(e,u,o),n.push(x),e=f(e,o,u),s.flag=i.flag=!1,t.splice(0,2),0===t.length&&n.push(e)):(l++,t.reverse()),!(l>1)););for(t=[],s=0;s<n.length;s++){for(e=n[s],i=[],u=0;u<e.length;u++)i.push(e[u].x,e[u].y);t.push(i)}return t},h.areaPoly=function(n){for(var r,t=0,e=n.length,i=0;e>i;i+=2)e>0?(r=(i+2)%e,0>r&&(r+=e)):r=0,t+=n[i]*n[r+1]-n[i+1]*n[r];return d.abs(t/2)},h.centroidPoly=function(n){for(var r,t,e,i,u,o=0,c=0,a=0;a<n.length-2;a+=2)r=n[a],e=n[a+1],t=n[a+2],i=n[a+3],u=r*i-t*e,o+=(r+t)*u,c+=(e+i)*u;return r=n[n.length-2],e=n[n.length-1],t=n[0],i=n[1],u=r*i-t*e,o+=(r+t)*u,c+=(e+i)*u,n=h.areaPoly(n),{x:o/(6*n),y:c/(6*n)}},h.convexHullPoly=function(n){var r=[],t=[],e=void 0;for(n.sort(function(n,r){return n[0]==r[0]?n[1]-r[1]:n[0]-r[0]}),e=0;e<n.length;e++){for(;2<=r.length&&0>=h.sideLine(r[r.length-2][0],r[r.length-2][1],r[r.length-1][0],r[r.length-1][1],n[e][0],n[e][1]);)r.pop();r.push(n[e])}for(e=n.length-1;e>=0;e--){for(;2<=t.length&&0>=h.sideLine(t[t.length-2][0],t[t.length-2][1],t[t.length-1][0],t[t.length-1][1],n[e][0],n[e][1]);)t.pop();t.push(n[e])}return t.pop(),r.pop(),r.concat(t)},h.distPolyRay=function(n,r,t,e,i){var u=n.length-2,o=z[0],c=z[1],a=z[2],f=z[3],l=z[4];o.x=r,o.y=t,c.x=r+e,c.y=t+i,t={dist:1/0,edge:0,norm_x:0,norm_y:0,refl_x:0,refl_y:0};for(var y=0;u>y;y+=2)a.x=n[y],a.y=n[y+1],f.x=n[y+2],f.y=n[y+3],(r=x(o,c,a,f,l))&&s(e,i,o,a,f,l,y/2,t);return a.x=f.x,a.y=f.y,f.x=n[0],f.y=n[1],(r=x(o,c,a,f,l))&&s(e,i,o,a,f,l,n.length/2-1,t),t},h.intrPolyPnt=function(n,r,t){var e=n.length-2,i={dist:1/0,edge:0,point_x:0,point_y:0,norm_x:0,norm_y:0};z[0].x=r,z[0].y=t;for(var u=0;e>u;u+=2)z[2].x=n[u],z[2].y=n[u+1],z[3].x=n[u+2],z[3].y=n[u+3],l(z[0],z[2],z[3],u>>1,i);return z[2].x=z[3].x,z[2].y=z[3].y,z[3].x=n[0],z[3].y=n[1],l(z[0],z[2],z[3],e>>1,i),n=1/i.dist,i.norm_x=(r-i.point_x)*n,i.norm_y=(t-i.point_y)*n,i},h.reversePoly=function(n){for(var r=[],t=n.length-2;t>=0;t-=2)r.push(n[t],n[t+1]);return r},h.timeAccel=function(n,r,t){return(r-n)/t},h.accelAccel=function(n,r,t){return(r-n)/t},h.distAccel=function(n,r,t){return(r*r-n*n)/(2*t)},h.timeDistAccel=function(n,r,t){return r=n*n-4*t*-r*.5,0>r?-1:(r=d.sqrt(r),d.abs(d.max((-n+r)/t,(-n-r)/t)))},d.pol=function(n,r){return{angle:h.getAngle(0,0,n,r),radial:h.distPnt(0,0,n,r,!0)}},d.rec=function(n,r,t,e){return{x:d.cos(e)*t+n,y:d.sin(e)*t+r}},d.normVec=function(n,r){var t=d.magVec(n,r,!0);return{x:n/t,y:r/t}},d.scaleVec=function(n,r,t){return{x:n*t,y:r*t}},d.truncVec=function(n,r,t){return t/=d.magVec(n,r),d.scaleVec(n,r,1>t?t:1)},d.magVec=function(n,r,t){return n=d.dotVec(n,r,n,r),t?d.sqrt(n):n},d.dotVec=function(n,r,t,e){return n*t+r*e},d.crossVec=function(n,r,t,e){return n*e-r*t},d.projVec=function(n,r,t,e){return d.scaleVec(t,e,d.dotVec(n,r,t,e)/d.magVec(t,e,!1))},d.rejVec=function(n,r,t,e){return t=d.projVec(n,r,t,e),{x:n-t.x,y:r-t.y}},d.perVec=function(n,r){return{x1:-r,y1:n,x2:r,y2:-n}},d.lerpVec=function(n,r,t,e,i){return{x:(t-n)*i+n,y:(e-r)*i+r}},d.headVec=function(n,r){return-d.atan2(-r,n)},d.revVec=function(n,r){return{x:-n,y:-r}},d.clockWiseVec=function(n,r,t,e){return-n*e+r*t>0},d.sinc=function(n){return p.isNaN(n)?NaN:p.isFinite(n)?0===n?1:d.sin(n*d.PI)/(n*d.PI):0},d.crd=function(n){return 2*d.sin(n/2)},d.exsec=function(n){return d.sec(n)-1},d.excsc=function(n){return d.csc(n)-1},d.aexsec=function(n){return d.asec(n+1)},d.aexcsc=function(n){return d.acsc(n+1)},d.vsin=function(n){return 1-d.cos(n)},d.vcos=function(n){return 1+d.cos(n)},d.cvsin=function(n){return 1-d.sin(n)},d.cvcos=function(n){return 1+d.sin(n)},d.hvsin=function(n){return d.vsin(n)/2},d.hvcos=function(n){return d.vcos(n)/2},d.hcvsin=function(n){return d.cvsin(n)/2},d.hcvcos=function(n){return d.cvcos(n)/2},d.avsin=function(n){return d.acos(1-n)},d.avcos=function(n){return d.acos(1+n)},d.acvsin=function(n){return d.asin(1-n)},d.acvcos=function(n){return d.asin(1+n)},d.ahvsin=function(n){return 2*d.asin(d.sqrt(n))},d.ahvcos=function(n){return 2*d.acos(d.sqrt(n))},d.csc=function(n){return 1/d.sin(n)},d.csch=function(n){return 1/d.sinh(n)},d.sec=function(n){return 1/d.cos(n)},d.sech=function(n){return 1/d.cosh(n)},d.cot=function(n){return 1/d.tan(n)},d.coth=function(n){return 1/d.tanh(n)},d.acsc=function(n){return 1/d.asin(n)},d.acsch=function(n){return 1/d.asinh(n)},d.asec=function(n){return 1/d.acos(n)},d.asech=function(n){return 1/d.acosh(n)},d.acot=function(n){return 1/d.atan(n)},d.acoth=function(n){return 1/d.atanh(n)},d.sincos=function(n){return n=d.sin(n),[d.sqrt(1-n*n),n]},p.isPrime=function(n){return p.isNaN(n)||!p.isFinite(n)||2>n?!1:n==u(n)?!0:!1},p.isMinusZero=function(n){return-(1/0)===1/n},p.isPower=function(n,t,e){e=r(e,d.precision(t));var i=d.ln(d.abs(n))/d.ln(d.abs(t));return 0>n&&0>t||n>0&&t>0?d.trunc(i,e)===i:n>0&&0>t?0===d.trunc(i,e)%2:!1},p.isEven=function(n){return p.isInteger(n)&&0===(1&n)},p.isNumeric=function(n){return"[object Array]"!==Object.prototype.toString.call(n)&&0<=n-parseFloat(n)+1},p.epsilon=function(){return p.EPSILON?p.EPSILON:d.abs(1-3*W)},g.inQuad=function(n){return n*n},g.outQuad=function(n){return n*(2-n)},g.inOutQuad=function(n){return.5>n?2*n*n:-1+(4-2*n)*n},g.inCubic=function(n){return d.pow(n,3)},g.outCubic=function(n){return--n*n*n+1},g.inOutCubic=function(n){return.5>n?4*d.pow(n,3):(n-1)*d.pow(2*n-2,2)+1},g.inQuart=function(n){return d.pow(n,4)},g.outQuart=function(n){return 1- --n*d.pow(n,3)},g.inOutQuart=function(n){return.5>n?8*d.pow(n,4):1-8*--n*d.pow(n,3)},g.inQuint=function(n){return d.pow(n,5)},g.outQuint=function(n){return 1+--n*d.pow(n,4)},g.inOutQuint=function(n){return.5>n?16*d.pow(n,5):1+16*--n*d.pow(n,4)},g.inPow=function(n,r){return d.pow(n,r)},g.outPow=function(n,r){var t=p.isEven(r-1)?1:-1;return 1+--n*d.pow(n,r-1)*t},g.inOutPow=function(n,r){var t=d.pow(2,r-1),e=p.isEven(r-1)?1:-1;return.5>n?t*d.pow(n,r):1+t*--n*d.pow(n,r-1)*e},g.inSine=function(n,r){return-d.pow(d.cos(n*d.HALFPI),r)+1},g.outSine=function(n,r){return d.pow(d.sin(n*d.HALFPI),r)},g.inOutSine=function(n,r){return 1>(n*=2)?-.5*d.pow(d.cos(d.PI*n),r)+.5:.5*d.pow(d.cos(d.PI*(n-1)),r)+.5},g.inExpo=function(n){return 0===n?0:d.pow(2,10*(n-1))},g.outExpo=function(n){return 1===n?1:-d.pow(2,-10*n)+1},g.inOutExpo=function(n){return 0===n?0:1===n?1:1>(n*=2)?.5*d.pow(2,10*(n-1)):.5*(-d.pow(2,-10*(n-1))+2)},g.inCirc=function(n){return-(d.sqrt(1-n*n)-1)},g.outCirc=function(n){return d.sqrt(1- --n*n)},g.inOutCirc=function(n){return 1>(n*=2)?-.5*(d.sqrt(1-n*n)-1):.5*(d.sqrt(1-(n-=2)*n)+1)},g.inElastic=function(n,t,e){if(t=r(t,.1),e=r(e,.1),0===n)return 0;if(1===n)return 1;if(1>t){t=1;var i=e/4}else i=e*d.asin(1/t)/d.TAU;return-(t*d.pow(2,10*--n)*d.sin((n-i)*d.TAU/e))},g.outElastic=function(n,t,e){if(t=r(t,.1),e=r(e,.1),0===n)return 0;if(1===n)return 1;if(1>t){t=1;var i=e/4}else i=e*d.asin(1/t)/d.TAU;return t*d.pow(2,-10*n)*d.sin((n-i)*d.TAU/e)+1},g.inOutElastic=function(n,t,e){if(t=r(t,.1),e=r(e,.1),0===n)return 0;if(1===n)return 1;if(1>t){t=1;var i=e/4}else i=e*d.asin(1/t)/d.TAU;return 1>(n*=2)?-.5*t*d.pow(2,10*--n)*d.sin((n-i)*d.TAU/e):t*d.pow(2,-10*--n)*d.sin((n-i)*d.TAU/e)*.5+1},g.inBack=function(n,r){return r=void 0==r?1.70158:o(r),1*n*n*((r+1)*n-r)},g.outBack=function(n,r){return r=void 0==r?1.70158:o(r),--n*n*((r+1)*n+r)+1},g.inOutBack=function(n,r){return r=void 0==r?1.70158:o(r),1>(n*=2)?.5*n*n*(((r*=1.525)+1)*n-r):.5*((n-=2)*n*(((r*=1.525)+1)*n+r)+2)},g.inBounce=function(n){return 1-this.outBounce(1-n)},g.outBounce=function(n){return n<A[0]?7.5625*n*n:n<A[1]?7.5625*(n-=A[2])*n+.75:n<A[3]?7.5625*(n-=A[4])*n+.9375:7.5625*(n-=A[5])*n+.984375},g.inOutBounce=function(n){return.5>n?.5*this.inBounce(2*n):.5*this.outBounce(2*n-1)+.5},g.smoothStep=function(n,r){if(0>r)return 0;switch(r){case 1:return $(n,2)*(3-2*n);case 2:return $(n,3)*(n*(6*n-15)+10);case 3:return $(n,4)*(35+n*(-84+(70-20*n)*n));case 4:return $(n,5)*(126+5*n*(-84+n*(108+7*n*(-9+2*n))));case 5:return $(n,6)*(462+n*(-1980-7*n*(-495+2*n*(220+9*n*(-11+2*n)))));case 6:return $(n,7)*(1716+7*n*(-1287+2*n*(1430+3*n*(-572+n*(390+11*n*(-13+2*n))))));default:for(var t=0,e=0;r>=e;e++)t+=d.nCr(-r-1,e)*d.nCr(2*r+1,r-e)*d.pow(n,r+e+1);return t}},g.overShoot=function(n,r){return n=g.outQuad(n),n*(1+d.sin(n*d.PI)*r)},g.poly=function(n,r,t){for(var e,i=0,u=0;u<r.length;u+=2){e=1;for(var o=0;o<r.length;o+=2)o!==u&&(e*=(n-r[o])/(r[u]-r[o]));i+=r[u+1]*d.pow(e,t[u/2])}return i},g.bezier=function(n,r,t){for(var e,i,u=0,o=0,c=r.length,a=0;c>a;a++){e=n,i=a;var f=c-1;i=d.nCr(f,i)*d.pow(e,i)*d.pow(1-e,f-i)*t[a],e=i*r[a],u+=e,o+=i}return u/o},g.spline=function(n,r,t,e,i,u){var o,c,a,f=[];i=u?[].concat(i[i.length-2],i[i.length-1],i,i[0],i[1],i[2],i[3]):[].concat(i[i.length-2],i[i.length-1],i,i[0],i[1]),u=(1-t)*(1+r)*(1-n)*.5;var s=(1-t)*(1-r)*(1+n)*.5,l=(1-t)*(1+r)*(1+n)*.5;for(n=(1-t)*(1-r)*(1-n)*.5,o=2;o<i.length-2;){r=i[o]-i[o-2],t=i[o+1]-i[o-1];var x=i[o+2]-i[o],y=i[o+3]-i[o+1];f.push(u*r+s*x,u*t+s*y,l*r+n*x,l*t+n*y),o+=2}for(o=2,a=[];o<i.length-4;){for(a.push(i[o],i[o+1]),c=e;1>c;)x=c*c,y=2*c,u=(y-3)*x+1,l=(3-y)*x,y=c-1,s=y*y*c,n=y*x,r=u*i[o]+s*f[2*o-2]+l*i[o+2]+n*f[2*o],t=u*i[o+1]+s*f[2*o-1]+l*i[o+3]+n*f[2*o+1],a.push(r,t),c+=e;a.push(i[o+2],i[o+3]),o+=2}return a},g.count=function(){var n=void 0;return function(t,e,i,u,o){u||(u=t);var c={min:t,max:e,change:i,next:u,current:u,mode:o};return 0>c.change?c.next=r(c.next,c.max):0<c.change&&(c.next=r(c.next,c.min)),function(r,t,e,i,u,o){switch("number"==typeof t&&(c.min=t),"number"==typeof e&&(c.max=e),"number"==typeof i&&(c.change=i),"number"==typeof u&&(c.next=u),"number"==typeof o&&(c.mode=o),c.current=c.next,c.mode){case 1:c.next+=c.change,0>c.change&&c.next<c.min?c.next+=c.max-c.min:0<c.change&&c.next>c.max&&(c.next-=c.max-c.min);break;case 2:0>c.change?c.next>c.min?(c.next+=c.change,c.next<c.min&&(c.next=c.min)):c.next=c.max:0<c.change&&(c.next<c.max?(c.next+=c.change,c.next>c.max&&(c.next=c.max)):c.next=c.min);break;case 3:0>c.change&&c.next<c.min?(c.change*=-1,n=c.min-c.next,c.next=c.min,c.next+=c.change-(c.change-n),c.current=c.next):c.next>c.max&&(c.change*=-1,n=c.max-c.next,c.next=c.max,c.next+=c.change-(c.change-n),c.current=c.next),c.next+=c.change;break;case 4:0>c.change&&c.next<=c.min?(c.change*=-1,c.next=c.min,c.current=c.next):c.next>=c.max&&(c.change*=-1,c.next=c.max,c.current=c.next),c.next+=c.change;break;case 5:if(0>c.change&&c.next<=c.min){c.change*=-1,c.next+=c.change,c.current=c.min;break}c.next>=c.max&&(c.change*=-1,c.next+=c.change,c.current=c.max),c.next+=c.change;break;default:0>c.change?c.next>c.min?c.next+=c.change:(c.next=c.min,c.current=c.next):0<c.change&&(c.next<c.max?c.next+=c.change:(c.next=c.max,c.current=c.max))}return r?c:c.current}}}(),m.andNot=function(n,r){return!n&&r},m.notAnd=function(n,r){return n&&!r},m.nand=function(n,r){return!(n&&r)},m.orNot=function(n,r){return n||!r},m.notOr=function(n,r){return!n||r},m.nor=function(n,r){return!(n||r)},m.xor=function(n,r){return n?!r:r},m.xnor=function(n,r){return!m.xor(n,r)},m.all=function(n){for(var r=0;r<n.length;r++){if(1!=n[r])return!1;if(r>=n.length-1)return!0}},m.nall=function(n){for(var r=0;r<n.length;r++)if(1==n[r])return!0;return!1};var tn={Math:d,Geometry:h,Tween:g,Boolean:m,Number:p};"function"==typeof define&&define.amd?define([],function(){return tn}):"object"===("undefined"==typeof module?"undefined":v(module))&&module.exports&&(module.exports=tn),n.Geometry=h,n.Tween=g}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0);
