/*https://github.com/Trung0246/Funch/ v0.4a*/

!function(n){"use strict";function r(n,r){return void 0!==n?n:r}function t(n,r){switch(n){case 0:return en(r);case 1:return on(r);case 2:return un(r);case 3:return cn(r);case 4:return r>0?un(r):on(r)}}function i(n){if(n!==on(n))return NaN;if(0>n)return NaN;if(n>170)return NaN;if(0===n||1===n)return 1;for(var r=1,t=2;n>=t;t++)r*=t;return r}function e(n,r){var t=0>n?-1:1,i=0>r?-1:1,e=0,o=1,u=1,c=0,a=void 0,f=void 0,s=void 0,v=void 0;for(n=w.abs(n),r=w.abs(r);0!==n;)a=on(r/n),f=r%n,s=e-u*a,v=o-c*a,r=n,n=f,e=u,o=c,u=s,c=v;k[0]=r,k[1]=t*e,k[2]=i*o}function o(){var n=M[0],r=M[1],t=M[2],i=M[3],e=(i>>>0)+(r>>>0),o=t+n+(e/2>>>31)>>>0,u=e>>>0;M[0]=t,M[1]=i;var c=0,a=0,f=0,s=0,v=23,l=4294967295<<32-v;c=n<<v|(r&l)>>>32-v,a=r<<v,n^=c,r^=a,c=n^t,a=r^i;var d=18,x=4294967295>>>32-d;f=n>>>d,s=r>>>d|(n&x)<<32-d,c^=f,a^=s;var y=5,g=4294967295>>>32-y;f=t>>>y,s=i>>>y|(t&g)<<32-y,c^=f,a^=s,M[2]=c,M[3]=a,M[5]=o,M[6]=u}function u(){var n=arguments[2],r=arguments.length-1,t=void 0,i=void 0,e=void 0;for(e=0;r>e;e++)i=0|arguments[e],i=(65535&i)*T[0]+(((i>>>16)*T[0]&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*T[1]+(((i>>>16)*T[1]&65535)<<16)&4294967295,n^=i,n=n<<13|n>>>19,t=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=(65535&t)+27492+(((t>>>16)+58964&65535)<<16);return n^=r,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,(n>>>0)/T[2]}function c(n){if(A.isNaN(n)||!A.isFinite(n))return NaN;if(0===n)return 0;if(n%1||2>n*n)return 1;if(n%2===0)return 2;if(n%3===0)return 3;if(n%5===0)return 5;for(var r=w.sqrt(n),t=7;r>=t;t+=30){if(n%t===0)return t;if(n%(t+4)===0)return t+4;if(n%(t+6)===0)return t+6;if(n%(t+10)===0)return t+10;if(n%(t+12)===0)return t+12;if(n%(t+16)===0)return t+16;if(n%(t+22)===0)return t+22;if(n%(t+24)===0)return t+24}return n}function a(n){var r=40,t=void 0,i=void 0,e=void 0,o=void 0,u=void 0,c=void 0,a=void 0,f=void 0,s=void 0;return n*=10,t=-27*n,i=-54*n,e=r*r*r,o=r*r,u=t*t*t,c=t*t,a=(27*o*t+2*u-9*r*t*i)/(54*e),f=(3*r*i-c)/(9*o),s=w.sqrt(a*a+f*f*f),an(-a+s,W)+an(-a-s,W)-t/(3*r)}function f(n,r,t){return w.nCr(t,r)*w.pow(n,r)*w.pow(1-n,t-r)}function s(n,r){return b.distPnt(rn.x,rn.y,n.x,n.y,!0)-b.distPnt(rn.x,rn.y,r.x,r.y,!0)}function v(n,r){for(var t=n.length;;)if(r=(r+1)%t,n[r].flag)return r}function l(n,r,t){var i=n.length,e=[];r>t&&(t+=i);for(var o=r;t>=o;o++)e.push(n[o%i]);return e}function d(n,r,t,i,e,o,u,c){var a=b.distPnt(o.x,o.y,t.x,t.y,!0);if(a<c.dist){var f=1/b.distPnt(e.x,e.y,i.x,i.y,!0),s=-(e.y-i.y)*f,v=(e.x-i.x)*f,l=2*(n*s+r*v);c.dist=a,c.norm_x=s,c.norm_y=v,c.refl_x=-l*s+n,c.refl_y=-l*v+r,c.edge=u}}function x(n,r,t,i,e){var o=void 0,u=void 0,c=void 0,a=void 0,f=n.x-r.x,s=n.y-r.y,v=t.x-r.x,l=t.y-r.y;a=(f*v+s*l)/(v*v+l*l),0>a||r.x===t.x&&r.y===t.y?(o=r.x,u=r.y):a>1?(o=t.x,u=t.y):(o=r.x+a*v,u=r.y+a*l),c=b.distPnt(o,u,n.x,n.y,!0),c<e.dist&&(e.dist=c,e.edge=i,e.point_x=o,e.point_y=u)}function y(n,r,t,i){t/=i,r/=i,n/=i;var e=t*t,o=(3*r-e)/9,u=(9*t*r-27*n-2*e*t)/54,c=o*o*o,a=c+u*u;if(a>=0){var f=w.sqrt(a),s=w.cbrt(u+f),v=w.cbrt(u-f);return-t/3+s+v}return 2*w.sqrt(-o)*w.cos(w.acos(u/w.sqrt(-c))/3)-t/3}function g(n,r,t,i,e){C.length=0,i/=e,t/=e,r/=e,n/=e;var o=void 0,u=void 0,c=void 0,a=void 0,f=i*i,s=2*t,v=4*n,l=0,d=y(4*t*n-r*r-f*n,r*i-v,-t,1),x=f*X,g=f/4-t+d,h=w.sqrt(g),m=-i/4,p=h/2;return 0===g?(o=x-s,u=2*w.sqrt(d*d-v),c=o+u,a=o-u):(o=x-g-s,u=(4*i*t-8*r-f*i)/(4*h),c=o+u,a=o-u),o=m+p,0>c||(u=w.sqrt(c)/2,C[l++]=o+u,C[l++]=o-u),o=m-p,0>a||(u=w.sqrt(a)/2,C[l++]=o+u,C[l++]=o-u),l}function h(n,r,t){var i=w.min(r.x,t.x),e=w.max(r.x,t.x),o=w.min(r.y,t.y),u=w.max(r.y,t.y);return i===e?o<=n.y&&n.y<=u:o===u?i<=n.x&&n.x<=e:!(i>n.x+1e-10||n.x-1e-10>e||o>n.y+1e-10||n.y-1e-10>u)}function m(n,r,t,i,e){var o=n.x-r.x,u=t.x-i.x,c=n.y-r.y,a=t.y-i.y,f=o*a-c*u;if(0===f)return null;var s=n.x*r.y-n.y*r.x,v=t.x*i.y-t.y*i.x,l=1/f;return e.x=(s*u-o*v)*l,e.y=(s*a-c*v)*l,h(e,t,i)?c>0&&e.y>n.y||0>c&&e.y<n.y?null:o>0&&e.x>n.x||0>o&&e.x<n.x?null:e:null}function p(n,r,t,i){var e=void 0,o=1e-10,u=!0,c=2===i?1:-1;if(S.length=0,_.length=0,j.length=0,"number"==typeof t||t instanceof A||(t=10),n===c*(1/0))return NaN;for(n===c*-(1/0)&&(n=c*-A.MAX_VALUE/10),t>10&&(o=an(1e-32,t/32)),e=0;5>e;e++)n+=c*o,S.push(n),_.push(r(n));for(e=0;e<_.length;e++)j.push(w.round(_[e],t));for(e=1;e<j.length;e++)u=u&&j[e-1]===j[e];return u===!0?j[0]:NaN}var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},b={},N={},w=n.Math,L=n.Boolean,A=n.Number;w.HALFPI=w.PI/2,w.TAU=2*w.PI,w.PHI=(1+w.sqrt(5))/2,w.SILVER=1+w.SQRT2,w.UPC=w.log(1+w.SQRT2)+w.SQRT2;for(var T=[3432918353,461845907,w.pow(2,32)],q=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],V=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],E=[.9999999999999999,2.224574423459406,2.444115549920689,1.7057986861852539,.8257463703357973,.28647031042892007,.07124513844341643,.012296749268608364,.001347817214557592,7263959403471071e-20,1,3.352953590554884,5.227518529742423,5.003720878235473,3.266590890998987,1.5255421920765353,.5185887413188858,.12747319185915415,.02185979575963238,.0023889438122503674,.00012875032817508128,.5641895835477563],I=[-39.6968302866538,220.946098424521,-275.928510446969,138.357751867269,-30.6647980661472,2.50662827745924,-54.4760987982241,161.585836858041,-155.698979859887,66.8013118877197,-13.2806815528857,-.00778489400243029,-.322396458041136,-2.40075827716184,-2.54973253934373,4.37466414146497,2.93816398269878,.00778469570904146,.32246712907004,2.445134137143,3.75440866190742,.02425],R=[1/2.75,2/2.75,1.5/2.75,2.5/2.75,2.25/2.75,2.625/2.75],M=[],C=[],S=[],_=[],j=[],O=[],Q=[],U=[],k=[],F=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],B=void 0,D=.5*(w.sqrt(3)-1),G=(3-w.sqrt(3))/6,H=1/6,W=1/3,X=.75,z=w.PI/180,Y=180/w.PI,Z=w.sqrt(w.PI),J=w.sqrt(w.TAU),K=3*w.PI,$=w.sqrt(3)/2,nn=4/3-1,rn=void 0,tn=[],en=w.round,on=w.floor,un=w.ceil,cn=w.trunc,an=w.pow,fn=w.random,sn=0;6>sn;sn++)tn.push({x:0,y:0,flag:!1});w.ln=w.log,w.log=function(n,t){return t=r(t,w.E),w.ln(n)/w.ln(t)},w.mod=function(n,r){return n-on(n/r)*r},w.rem=function(n,r,t){if(t||(t=r,r=0),r>t){var i=t;t=r,r=i}var e=t-r;return n=(n+r)%e-r,r>n&&(n+=e),n>t&&(n-=e),n},w.cycle=function(n,r){return n%=r,n>0?n:n+r},w.gamma=function(n,t){if(t=r(t,7),.5>n)return w.PI/w.sin(n*w.PI)/w.gamma(1-n);n--;for(var i=q[0],e=1;t+2>e;e++)i+=q[e]/(n+e);var o=n+t+.5;return J*w.pow(o,n+.5)*w.exp(-o)*i},w.lnGamma=function(n){var r=0,t=1.000000000190015,i=void 0,e=void 0,o=void 0;for(o=(e=i=n)+5.5,o-=(i+.5)*w.ln(o);6>r;r++)t+=V[r]/++e;return w.ln(2.5066282746310007*t/i)-o},w.factorial=function(n){return n++,n===on(n)?i(n-1):0>n?w.PI/(w.sin(w.PI*n)*w.gamma(1-n)):w.exp(w.lnGamma(n))},w.nCr=function(n,r){for(var t=1,i=0;r>i;i++)t*=(n-i)/(i+1);return t},w.nPr=function(n,r){for(var t=1,i=0;r>i;i++)t*=n-i;return t},w.pow=function(n,r){var t=an(n,r);if(A.isNaN(t)){var i=0>n&&0>r,e=i&&A.isEven(r)?NaN:an(w.abs(n),r);t=i&&e?-e:e}return t},w.sigmoid=function(n){return 1/(1+w.pow(w.E,-n))},w.pair=function(n,r){return.5*(n+r-2)*(n+r-1)+n},w.integral=function(n,t,i,e,o){e=r(e,1e-17),o=r(o,11);var u=an(2,-o),c=void 0,a=void 0,f=void 0,s=void 0;for(c=0;c<20*an(2,o)&&(a=c*u,f=w.sinh(a),O[c]=w.tanh(w.HALFPI*f),Q[c]=w.PI*w.cosh(a)/(w.cosh(w.PI*f)+1),w.abs(1-O[c])>=e);c++);var v=c,l=0,d=(t-n)/2,x=(t+n)/2;for(c=1;o>c;c++)for(s=0;v>s;s+=an(2,o-c))(s%an(2,o-c+1)!==0||1===c)&&(0===s?l+=Q[0]*i(x):(a=d*O[s],l+=Q[s]*(i(x-a)+i(x+a))));return 2*d*u*l},w.derivative=function(n,t,i,e,o){i=r(i,6),e=r(e,1e-15),o=r(o,1);var u=void 0,c=void 0,a=void 0;U[0]=(t(n+o)-t(n-o))/(2*o);for(var f=1;i-1>=f;f++){U[f]=0,u=U[0],a=o,o*=.5,U[0]=(t(n+o)-t(n-o))/a;for(var s=4,v=1;f>=v;v++,s*=4)c=U[v],U[v]=(s*U[v-1]-u)/(s-1),u=c;if(w.abs(U[f]-U[f-1])<e)return U[f]}return NaN},w.limit=function(n,r,t,i){"number"==typeof i||i instanceof A||(i=10);var e=t(r);switch(n){case 1:return p(r,t,i,1);case 2:return p(r,t,i,2);default:if(!A.isNaN(e))return e;if(!A.isNaN(r)){if(r===1/0)return p(r,t,i,1);if(r===-(1/0))return p(r,t,i,2);var o=p(r,t,i,1),u=p(r,t,i,2);if(o===u)return o}}return NaN},w.solve=function(n,t,i,e,o){n=r(n,-100),t=r(t,100);var u=0,c=i(n);if(c*i(t)===0)return 0===c?n:t;var a=i((t+n)/2);for(e=r(e,1e-17),o=r(o,1e7);t-n>e&&o>u;){if(0>c*a)t=(t+n)/2;else if(c*a>0)n=(t+n)/2,c=i(n);else if(c*i(t)===0)return 0===c?n:t;a=i((t+n)/2),u++}return c*i(t)<0?(t+n)/2:NaN},w.rational=function(n,t){t=r(t,0);var i=0,e=0,o=0,u=0,c=[n,1],a=1;do i=en(n*a),e=n-i/a,1===a&&(o=a,u=e),w.abs(e)<w.abs(u)&&(o=a,u=e),c[0]=en(n*o),c[1]=o,a++;while(0!==t?t>=a:c[0]/c[1]!==n);return 0===c[0]&&0===c[1]&&(c[0]=n,c[1]=1),c},w.pdf=function(n,r,t,i){var e=t*J,o=w.exp(-w.pow(i-n,2)/(2*r));return o/e},w.cdf=function(n,r,t){return.5*w.erfc(-(t-n)/(r*w.SQRT2))},w.ppf=function(n,r,t){return n-r*w.SQRT2*w.ierfc(2*t)},w.erf=function(n){for(var r=1,t=1,i=n,e=1;50>e;e++)r*=e,t*=-1,i+=t*an(n,2*e+1)/(r*(2*e+1));return 2*i/Z},w.erfc=function(n){return 1-w.erf(n)},w.ierf=function(n){return w.iNorm((n+1)/2)/w.SQRT2},w.ierfc=function(n){return-w.iNorm(.5*n)/w.SQRT2},w.erfcx=function(n){if(0>n)return-6.1>n?2*w.exp(n*n):2*w.exp(n*n)-w.erfcx(-n);if(n>50){var r=n*n;return n>5e7?E[21]/n:E[21]*(r*(r+4.5)+2)/(n*(r*(r+5)+3.75))}var t=E[0]+n*(E[1]+n*(E[2]+n*(E[3]+n*(E[4]+n*(E[5]+n*(E[6]+n*(E[7]+n*(E[8]+n*E[9])))))))),i=E[10]+n*(E[11]+n*(E[12]+n*(E[13]+n*(E[14]+n*(E[15]+n*(E[16]+n*(E[17]+n*(E[18]+n*(E[19]+n*E[20])))))))));return t/i},w.iNorm=function(n){var r=void 0,t=void 0,i=void 0,e=void 0;return n<I[21]?(r=w.sqrt(-2*w.ln(n)),i=(((((I[11]*r+I[12])*r+I[13])*r+I[14])*r+I[15])*r+I[16])/((((I[17]*r+I[18])*r+I[19])*r+I[20])*r+1),e=i):(r=n-.5,t=r*r,i=(((((I[0]*t+I[1])*t+I[2])*t+I[3])*t+I[4])*t+I[5])*r/(((((I[6]*t+I[7])*t+I[8])*t+I[9])*t+I[10])*t+1),e=i-J*(.5*w.erfcx(-i/w.SQRT2)-w.exp(.5*i*i)*n)),e},w.kelly=function(n,r){return(r*(n+1)-1)/n},w.round=function(n,r,t){return w.adjust(0,n,r,t)},w.floor=function(n,r,t){return w.adjust(1,n,r,t)},w.ceil=function(n,r,t){return w.adjust(2,n,r,t)},w.trunc=function(n,r,t){return w.adjust(3,n,r,t)},w.away=function(n,r,t){return w.adjust(4,n,r,t)},w.round2=function(n,r,t){return w.adjust2(0,n,r,t)},w.floor2=function(n,r,t){return w.adjust2(1,n,r,t)},w.ceil2=function(n,r,t){return w.adjust2(2,n,r,t)},w.trunc2=function(n,r,t){return w.adjust2(3,n,r,t)},w.away2=function(n,r,t){return w.adjust2(4,n,r,t)},w.adjust=function(n,i,e,o){e=r(e,0),o=r(o,10);var u=void 0,c=void 0;return c=w.pow(o,e),u=t(n,i*c)/c},w.adjust2=function(n,i,e,o){e=r(e,0),o=r(o,10);var u=void 0,c=void 0,a=void 0,f=void 0;u=r(o,10);var s=w.abs(i);return c=10===u?w.log10(s):2===u?w.exp(s):w.log(s,u),c=on(c-e+1),a=w.pow(u,w.abs(c)),f=0>c?t(n,i*a)/a:t(n,i/a)*a},w.correct=function(n,t){return t=r(t,13),w.round(n,t)===w.round(n,t-1)?w.round(n,t):n},w.snap=function(n,t,i,e,o,u){return e=r(e,0),0===i?t:(t-=e,t=i*w.adjust(n,t/i,o,u),e+t)},w.snap2=function(n,t,i,e,o,u){return e=r(e,0),0===i?t:(t-=e,t=i*w.adjust2(n,t/i,o,u,n),e+t)},w.shear=function(n){return n=w.abs(n),n-on(n)},w.precision=function(n){if(!A.isFinite(n))return 0;for(var r=1,t=0;en(n*r)/r!==n;)r*=10,t++;return t},w.order=function(n){return on(w.ln(w.abs(n))/w.LN10)},w.ramp=function(n){return n>0?n:0},w.heaviside=function(n,r){if(A.isNaN(r))return NaN;if(r>0)return 1;if(0===r)switch(n){case 1:return 0;case 2:return 1;default:return.5}return 0},w.haar=function(n){return.5>n&&n>=0?1:1>=n&&n>.5?-1:0},w.rect=function(n){return n=w.abs(n),n>.5?0:.5===n?.5:.5>n?1:NaN},w.tri=function(n){return n=w.abs(n),1>n?1-n:0},w.fold=function(n,r){return n?r>0?2*r-1:2*w.abs(r):0>r?2*w.abs(r)-1:2*r},w.one=function(n){return en(n)%2*2-1},w.range=function(n,t,i,e,o,u){return u=r(u,1),e&&o?n>=t*u&&i*u>=n:e?n>=t*u&&i*u>n:o?n>t*u&&i*u>=n:n>t*u&&i*u>n},w.compare=function(n,t,i,e,o){return o=r(o,1),e?i?t*o>=n:t*o>n:i?n>=t*o:n>t*o},w.clamp=function(n,r,t){return r>n?n=r:n>t&&(n=t),n},w.wrap=function(n,r,t){var i=t-r,e=(n-r)%i;return 0>e&&(e+=i),e+r},w.bounce=function(n,r,t){n-=r,t-=r;var i=2*t,e=n%i;return 0>e&&(e+=i),e>t&&(e=i-e),e+r},w.map=function(n,r,t,i,e){var o=(n-r)/(t-r);return i+o*(e-i)},w.norm=function(n,r,t){return(n-r)/(t-r)},w.lerp=function(n,r,t){return(1-n)*r+n*t},w.gcd=function(){if(0===arguments.length)return NaN;k[0]=arguments[0];for(var n=1;n<arguments.length;n++)e(k[0],arguments[n]);return[].concat(k)},w.lcm=function(){if(0===arguments.length)return NaN;var n=arguments[0];k[0]=n;for(var r=1;r<arguments.length;r++)e(n,arguments[r]),n=n*arguments[r]/k[0];return n},w.factor=function(n){var r=[],t=void 0;for(t=2;n>=t;t++)for(;n%t===0;)r.push(t),n/=t;return r},w.divisor=function(n){for(var r=A.isEven(n),t=r?1:2,i=[1,n],e=void 0,o=r?2:3;an(o,2)<=n;o+=t)n%o===0&&(i.push(o),e=n/o,e!==o&&i.push(e));return i},w.random=function(n,t,i,e,c,a){var f=void 0;return e?("number"==typeof e?M[0]=e:M[0]=0|e[0],M[1]=0|e[1],M[2]=0|e[2],M[3]=0|e[3],M[4]=0|e[4],o(),f=u(M[5],M[6],M[4])):f=fn(),n=r(n,0),t=r(t,1),n>t?f=null==c?0:c:n==t?f=null==a?n:a:(i?(n=un(n),t=on(t),f=on(f*(t-n+1))+n):f=f*(t-n)+n,f)},w.randomTri=function(n,t,i,e){i=r(i,0);var o=w.random(0,1,!1,e),u=t-n;return o>(i-n)/u?t-w.sqrt((1-o)*u*(t-i)):n+w.sqrt(o*u*(i-n))},w.randomCirc=function(n,r,t,i,e){var o=w.random(n,r,!1,e),u=i-t;return u*=u,w.sqrt(u-u*o*o)+t},w.noise=function(n,r,t,i){B!==n&&(B=n);var e=void 0,o=void 0,u=void 0,c=void 0,a=void 0,f=void 0,s=void 0,v=void 0,l=void 0,d=void 0,x=void 0,y=void 0,g=void 0,h=void 0,m=void 0,p=void 0,P=void 0,b=0;return"number"==typeof i?(P=(r+t+i)*W,e=on(r+P),c=on(t+P),s=on(i+P),P=(e+c+s)*H,d=r-(e-P),x=t-(c-P),y=i-(s-P),x>d?y>x?(o=0,a=0,v=1,u=0,f=1,l=1):y>d?(o=0,a=1,v=0,u=0,f=1,l=1):(o=0,a=1,v=0,u=1,f=1,l=0):y>x?y>d?(o=0,a=0,v=1,u=1,f=0,l=1):(o=1,a=0,v=0,u=1,f=0,l=1):(o=1,a=0,v=0,u=1,f=1,l=0),e&=255,c&=255,s&=255,P=.6-d*d-x*x-y*y,p=B[e+B[c+B[s]]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],d,x)),g=d-o+H,h=x-a+H,m=y-v+H,P=.6-g*g-h*h-m*m,p=B[e+o+B[c+a+B[s+v]]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],g,h)),g=d-u+2*H,h=x-f+2*H,m=y-l+2*H,P=.6-g*g-h*h-m*m,p=B[e+u+B[c+f+B[s+l]]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],g,h)),g=d-1+3*H,h=x-1+3*H,m=y-1+3*H,P=.6-g*g-h*h-m*m,p=B[e+1+B[c+1+B[s+1]]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],g,h)),32*b):(o=(r+t)*D,e=on(r+o),c=on(t+o),a=(e+c)*G,d=r-(e-a),x=t-(c-a),d>x?(o=1,a=0):(o=0,a=1),e&=255,c&=255,P=.5-d*d-x*x,p=B[e+B[c]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],d,x)),g=d-o+G,h=x-a+G,P=.5-g*g-h*h,p=B[e+o+B[c+a]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],g,h)),g=d-1+2*G,h=x-1+2*G,P=.5-g*g-h*h,p=B[e+1+B[c+1]],0>P||(P*=P,b+=P*P*w.dotVec(F[p][0],F[p][1],g,h)),70*b)},b.normRad=function(n){return n=b.fullRad(n),n>w.PI&&(n-=w.TAU),n},b.toRad=function(n){return n*z},b.fullRad=function(n){return(w.TAU+n%w.TAU)%w.TAU},b.normDeg=function(n){return n=b.fullDeg(n),n>180&&(n-=360),n},b.toDeg=function(n){return n*Y},b.fullDeg=function(n){return(360+n%360)%360},b.getAngle=function(n,r,t,i){return w.atan2(i-r,t-n)},b.relfAngle=function(n,r){return 2*r-n},b.diffAngle=function(n,r){return-((n-r+K)%w.TAU-w.PI)},b.isBetwAngle=function(n,r,t){return n=b.fullRad(n),r=b.fullRad(r),t=b.fullRad(t),t>r?n>=r&&t>=n:n>=r||t>=n},b.colliAnglePnt=function(n,r,t,i,e,o){return b.isBetwAngle(b.getAngle(t,i,e,o),n,r)},b.distPnt=function(n,r,t,i,e){var o=void 0,u=n-t,c=r-i;return o=u*u+c*c,e&&(o=w.sqrt(o)),o},b.polarDistPnt=function(n,r,t,i,e){var o=n*n+t*t-2*n*t*w.cos(i-r);return e&&(o=w.sqrt(o)),o},b.manDistPnt=function(n,r,t,i){return w.abs(n-t)+w.abs(r-i)},b.chevDistPnt=function(n,r,t,i){return w.max(w.abs(n-t),w.abs(r-i))},b.rotPnt=function(n,r,t,i,e,o){var u=w.sin(o),c=w.cos(e);return t-=n,i-=r,{x:t*c-i*u+n,y:t*u+i*c+r}},b.anglePnt=function(n,r,t,i,e,o){var u=n-e,c=r-o,a=t-e,f=i-o;return w.acos(w.dotVec(u,c,a,f)/w.sqrt((u*u+c*c)*(a*a+f*f)))},b.cntrPnt=function(n,r,t,i,e){var o=void 0,u=void 0,c=void 0,a=void 0,f=void 0,s=void 0;return u=b.distPnt(t,i,n,r,!0),c=(n+t)/2,a=(r+i)/2,o=w.sqrt(e*e-an(u/2,2)),f=o*(r-i)/u,s=o*(t-n)/u,{x1:c+f,y1:a+s,x2:c-f,y2:a-s}},b.cmpPnt=function(n,t,i,e,o){return o=r(o,1e-10),w.abs(n-i)>o?n>i?1:-1:w.abs(t-e)>o?t>e?1:-1:0},b.slopeLine=function(n,r,t,i){return(i-r)/(t-n)},b.stdLine=function(n,r,t,i){var e={};if(t-n===0)e.a=-1,e.b=0,e.c=n;else{var o=b.slopeLine(n,r,t,i);e.a=o,e.b=-1,e.c=-t*o+i}return e},b.distLinePnt=function(n,r,t,i,e,o,u,c){if(n)return w.abs((e-t)*o-(i-r)*u+i*t-e*r)/b.distPnt(r,t,i,e,!0);var a=b.distPnt(r,t,i,e,!1);if(0===a)return b.distPnt(o,u,r,t,c);var f=w.dotVec(o-r,u-t,i-r,e-t)/a;return f=w.max(0,w.min(1,f)),b.distPnt(o,u,r+f*(i-r),t+f*(e-t),c)},b.distLine=function(n,r,t,i,e,o,u,c,a,f){var s=b.distLinePnt(n,o,u,c,a,r,t,f),v=void 0;return s>0?(v=b.distLinePnt(n,o,u,c,a,i,e,f),v>s?s:v):0},b.intrLine=function(n,r,t,i,e,o,u,c){var a=void 0,f=void 0,s=void 0,v=void 0,l=void 0,d=void 0,x=void 0,y=void 0,g=void 0,h={x:null,y:null,onLine1:!1,onLine2:!1};return v=t-n,l=i-r,d=u-e,x=c-o,f=r-o,s=n-e,a=x*v-d*l,0===a?(A.isNaN(b.slopeLine(d*l,v*f,v*x,l*s))&&A.isNaN(b.slopeLine(v*x,x*s,d*l,d*f))&&(h.onLine1=b.colliLinePnt(!0,n,r,t,i,e,o)||b.colliLinePnt(!0,n,r,t,i,u,c),h.onLine2=h.onLine1),h):(y=d*f-x*s,g=v*f-l*s,f=y/a,s=g/a,h.x=n+f*v,h.y=r+f*l,0>f||f>1||(h.onLine1=!0),0>s||s>1||(h.onLine2=!0),h)},b.intrLineCirc=function(n,r,t,i,e,o,u){var c=void 0,a=void 0,f=void 0,s=void 0,v=void 0,l=void 0,d={x:null,y:null,x1:null,y1:null,x2:null,y2:null,onLine:!1,onLine1:!1,onLine2:!1};return c=b.distPnt(n,r,t,i,!0),f=(t-n)/c,s=(i-r)/c,v=f*(e-n)+s*(o-r),d.x=v*f+n,d.y=v*s+r,a=b.distPnt(d.x,d.y,e,o,!0),u>a?(l=w.sqrt(u*u-a*a),d.x1=(v-l)*f+n,d.y1=(v-l)*s+r,d.onLine1=b.colliLinePnt(!0,n,r,t,i,d.x1,d.y1),d.x2=(v+l)*f+n,d.y2=(v+l)*s+r,d.onLine2=b.colliLinePnt(!0,n,r,t,i,d.x2,d.y2)):a===u?d.onLine=!0:(d.x=null,d.y=null),d},b.sideLine=function(n,r,t,i,e,o){return w.crossVec(t-n,i-r,e-n,o-r)},b.onLine=function(n,r,t,i,e){var o=t-n,u=i-r,c=o*e,a=u*e;return{x:n+c,y:r+a}},b.colliLinePnt=function(n,t,i,e,o,u,c,a){a=r(a,1e-10);var f=t-u,s=i-c,v=u-e,l=c-o,d=w.crossVec(f,s,v,l);return!(-a>d||d>a||w.dotVec(f,s,v,l)<0&&n)},b.getXLine=function(n,r,t,i,e){var o=i-r,u=t-n;if(0===o)return null;var c=o/u,a=e-i,f=a/c,s=t+f;return s},b.getYLine=function(n,r,t,i,e){var o=i-r,u=t-n;if(0===u)return null;var c=o/u,a=e-t,f=a*c,s=i+f;return s},b.colliRayRect=function(n,r,t,i,e,o,u,c){t=1/t,i=1/i;var a=(e-n)*t,f=(u-n)*t,s=w.min(a,f),v=w.max(a,f);return a=(o-r)*i,f=(c-r)*i,s=w.max(s,w.min(a,f)),v=w.min(v,w.max(a,f)),v>w.max(s,0)},b.colliArcCircPnt=function(n,r,t,i,e,o,u,c,a){var f=n-t,s=r-i;return!w.clockWiseVec(o,u,f,s)&&w.clockWiseVec(c,a,f,s)&&b.colliCirc(0,0,0,f,s,e)},b.colliCircPnt=function(n,t,i,e,o,u){u=r(u,1e-10);var c=b.distPnt(n,t,i,e,!1),a=o*o;return a>c?1:w.abs(c-a)<u?0:-1},b.colliCirc=function(n,r,t,i,e,o){var u=i-n,c=e-r,a=t+o;return a*a>=u*u+c*c},b.colliCircRect=function(n,r,t,i,e,o,u){return b.distPnt(w.clamp(n,i,o),w.clamp(r,e,u),n,r,!1)<=t*t},b.intrCirc=function(n,r,t,i,e,o){var u=b.distPnt(n,r,i,e,!0),c=(t*t-o*o+u*u)/(2*u),a=c/u;if(c>t)return NaN;var f=n+(i-n)*a,s=r+(e-r)*a,v=w.sqrt(t*t-c*c)/u;return c=e-r,a=i-n,[f-v*c,s+v*a,f+v*c,s-v*a]},b.randomCirc=function(n,r,t,i){var e=fn(),o=fn(),u=void 0;return i&&e>o&&(u=o,o=e,e=u),w.rec(n,r,o*t,w.TAU*e/o)},b.onElli=function(n,r,t,i,e,o){var u=w.sin(e),c=w.sin(o);return e=w.cos(e),o=w.cos(o),{x:t*o*e-i*c*u+n,y:i*c*e+t*o*u+r}},b.colliElliPnt=function(n,r,t,i,e,o,u){var c=w.cos(e),a=w.sin(e);o-=n,u-=r;var f=c*o+a*u;return a=a*o-c*u,c=f,1>=4*c*c/(t*t)+4*a*a/(i*i)},b.intrElli=function(n,r,t,i,e,o,u,c,a,f){var s=w.cos(e),v=w.sin(e),l=w.cos(f),d=w.sin(f),x=w.cos(e-f),y=w.sin(e-f),h=i*(-n*s+o*s-r*v+u*v),m=c*i*x,p=i*a*y,P=t*(-r*s+u*s+n*v-o*v),b=-t*c*y,N=t*a*x,L=t*i,A=h*h,T=m*m,q=P*P,V=b*b,E=L*L,I=4*h*p,R=4*b*N,M=4*m*p,S=4*P*N,_=2*h*m,j=2*P*b,O=[],Q=void 0,U=void 0,k=void 0,F=void 0;Q=g(A+_+T+q+j+V-E,I+M+S+R,2*A-2*T+4*p*p+2*q-2*V+4*N*N-2*E,I-M+S-R,A-_+T+q-j+V-E);for(var B=0;Q>B;++B)U=2*w.atan(C[B]),k=w.cos(U)*c,F=w.sin(U)*a,O[2*B]=o+k*l-F*d,O[2*B+1]=u+k*d+F*l;return O},b.intrElliLine=function(n,r,t,i,e,o,u,c,a){var f=w.sin(e);e=w.cos(e);var s=i*((-n+o)*e+(-r+u)*f),v=t*((-r+u)*e+(n-o)*f),l=i*((-n+c)*e+(-r+a)*f),d=t*((-r+a)*e+(n-c)*f),x=t*i,y=s*s,g=s*l,h=v*v,m=v*d,p=y-2*g+l*l+h-2*m+d*d,P=-2*y+2*g-2*h+2*m,b=-x*x+y+h,N=P*P-4*p*b,L=void 0,A=[];if(0===N)L=-P/(2*p),A[0]=(1-L)*o+L*c,A[1]=(1-L)*u+L*a;else if(N>0){var T=w.sqrt(N),q=0;L=(-P-T)/(2*p),A[0]=(1-L)*o+L*c,A[1]=(1-L)*u+L*a,q++,L=(-P+T)/(2*p),A[2*q]=(1-L)*o+L*c,A[2*q+1]=(1-L)*u+L*a,q++}return A},b.boundElli=function(n,r,t,i,e){var o=w.atan(-i*w.tan(e)/t),u=w.atan(i*w.cot(e)/t),c=w.sin(e);return e=w.cos(e),o=w.abs(t*w.cos(o)*e-i*w.sin(o)*c),u=w.abs(i*w.sin(u)*e+t*w.cos(u)*c),{xMin:-o+n,yMin:-u+r,xMax:o+n,yMax:u+r}},b.randomElli=function(n,r,t,i,e,o){var u=fn(),c=fn(),a=void 0;return o&&u>c&&(a=c,c=u,u=a),b.onElli(n,r,c*t,c*i,e,w.TAU*u/c)},b.distElliPnt=function(n,r,t){var i=1/w.sqrt(w.pow(w.sin(t)/r,2)+w.pow(w.cos(t)/n,2));return A.isFinite(i)?i:0},b.centroidTri=function(n,r,t,i,e,o){return{x:(n+t+e)/3,y:(r+i+o)/3}},b.equilTri=function(n,r,t){var i=r+t*$,e=t/2;return{x1:n,y1:r,x2:n+e,y2:i,x3:n-e,y3:i}},b.rightTri=function(n,r,t,i){return{x1:n,y1:r,x2:n,y2:r-i,x3:n+t,y3:r}},b.crcmCntrTri=function(n,r,t,i,e,o){var u=void 0,c=void 0,a=void 0,f=void 0,s=void 0,v=void 0,l=void 0;return u=n-e,c=r-o,a=t-e,f=i-o,s=u*u+c*c,v=a*a+f*f,l=2*w.crossVec(u,c,a,f),{x:e-w.crossVec(c,s,a,v)/l,y:o+w.crossVec(u,s,a,v)/l}},b.crcmCircTri=function(n,r,t,i,e,o){var u=t-n,c=i-r,a=e-n,f=o-r,s=u*(n+t)+c*(r+i),v=a*(n+e)+f*(r+o),l=2*(u*(o-i)-c*(e-t)),d=void 0,x=void 0,y={};return y.x=(f*s-c*v)/l,y.y=(u*v-a*s)/l,d=y.x-n,x=y.y-r,y.r=2*w.sqrt(d*d+x*x),y},b.inCircTri=function(n,r,t,i,e,o){var u=b.distPnt(e,o,t,i,!0),c=b.distPnt(n,r,e,o,!0),a=b.distPnt(t,i,n,r,!0),f=u+c+a,s=(a+u+c)/2;return{x:(n*u+t*c+e*a)/f,y:(r*u+i*c+o*a)/f,r:w.sqrt(s*(s-a)*(s-u)*(s-c))/s}},b.colliTriPnt=function(n,r,t,i,e,o,u,c){var a=r*e-n*o+(o-r)*u+(n-e)*c,f=n*i-r*t+(r-i)*u+(t-n)*c;if(0>a!=0>f)return!1;var s=-i*e+r*(e-t)+n*(i-o)+t*o;return 0>s&&(a=-a,f=-f,s=-s),a>0&&f>0&&s>=a+f},b.areaTri=function(n,r,t,i,e,o){return w.abs(((e-n)*(i-r)-(t-n)*(o-r))/2)},b.randomTri=function(n,r,t,i,e,o){var u=w.sqrt(fn()),c=fn(),a=1-u,f=u*(1-c),s=u*c;return{x:a*n+f*t+s*e,y:a*r+f*i+s*o}},b.colliRectPnt=function(n,r,t,i,e,o){return t-n>0&&i-r>0?!(n>e||e>t||r>o||o>i):!1},b.colliRect=function(n,r,t,i,e,o,u,c){return w.abs(t-n)>0&&w.abs(i-r)>0&&w.abs(u-e)>0&&w.abs(c-o)>0?!(e>t||o>i||n>u||r>c):!1},b.intrRect=function(n,r,t,i,e,o,u,c){return b.colliRect(n,r,t,i,e,o,u,c)?{xMin:w.max(n,e),yMin:w.max(r,o),xMax:w.min(t,u),yMax:w.min(i,c)}:null},b.randomRect=function(n,r,t,i){return{x:n+fn()*w.abs(t-n),y:r+fn()*w.abs(i-r)}},b.colliPolyPnt=function(n,r,t){for(var i=!1,e=void 0,o=void 0,u=void 0,c=void 0,a=-2,f=n.length-2;(a+=2)<n.length;f=a)e=n[a],o=n[a+1],u=n[f],c=n[f+1],(t>=o&&c>t||t>=c&&o>t)&&(u-e)*(t-o)/(c-o)+e>r&&(i=!i);return i},b.colliPolyCirc=function(n,r,t,i){if(b.colliPolyPnt(n,r,t))return!0;for(var e=2;e<n.length;e+=2)if(b.distLinePnt(!1,n[e-2],n[e-1],n[e],n[e+1],r,t,!1)<i*i)return!0;return b.distLinePnt(!1,n[n.length-2],n[n.length-1],n[0],n[1],r,t,!1)<i*i},b.colliPoly=function(n,r){var t=b.boundPoly(n),i=b.boundPoly(r),e=void 0;if(b.colliRect(t.xMin,t.yMin,t.xMax,t.yMax,i.xMin,i.yMin,i.xMax,i.yMax)){var o=n.length>r.length?n.length:r.length;for(e=0;o>e;e+=2){if(b.colliPolyPnt(r,n[e],n[e+1])&&e<=n.length)return!0;if(b.colliPolyPnt(n,r[e],r[e+1])&&e<=r.length)return!0}}return!1},b.isSimplePoly=function(n){var r=n.length>>1;if(4>r)return!0;for(var t=void 0,i=void 0,e=void 0,o=void 0,u=void 0,c=void 0,a=void 0,f=void 0,s=void 0,v=0;r>v;v++){t=n[2*v],i=n[2*v+1],v==r-1?(e=n[0],o=n[1]):(e=n[2*v+2],o=n[2*v+3]);for(var l=0;r>l;l++)if(!(w.abs(v-l)<2||l===r-1&&0===v||v===r-1&&0===l)&&(u=n[2*l],c=n[2*l+1],l==r-1?(a=n[0],f=n[1]):(a=n[2*l+2],f=n[2*l+3]),s=b.intrLine(t,i,e,o,u,c,a,f),s.onLine1&&s.onLine2))return!1}return!0},b.isConvexPoly=function(n){if(n.length<=6)return!1;var r=b.isClockWisePoly(n),t=b.sideLine(n[n.length-3],n[n.length-2],n[0],n[1],n[2],n[3]),i=void 0;t=t>0||w.abs(t)<0;for(var e=2;e<n.length-2;e+=2)if(i=b.sideLine(n[e-2],n[e-1],n[e],n[e+1],n[e+2],n[e+3]),(r?i>0:0>i)!==t)return!0;return!1},b.isClockWisePoly=function(n){for(var r=0,t=0,i=void 0,e=void 0,o=void 0,u=0;u<n.length;u+=2)e=(u+2)%n.length,o=w.atan2(n[e+1]-n[u+1],n[e]-n[u]),0===u?i=o:(o-=i,t+=b.normRad(o-r),r=o);return t+=b.normRad(-r),t>=0},b.boundPoly=function(n){for(var r=A.MAX_SAFE_INTEGER,t=A.MAX_SAFE_INTEGER,i=A.MIN_SAFE_INTEGER,e=A.MIN_SAFE_INTEGER,o=void 0,u=void 0,c=0;c<n.length;c+=2)o=n[c],u=n[c+1],r=w.min(r,o),t=w.min(t,u),i=w.max(i,o),e=w.max(e,u);return{xMin:r,yMin:t,xMax:i,yMax:e}},b.triPoly=function(n){var r=void 0,t=void 0,i=void 0,e=void 0,o=void 0,u=void 0,c=void 0,a=void 0,f=void 0,s=void 0,v=void 0,l=void 0,d=void 0,x=void 0,y=void 0,g=void 0;if(r=n.length>>1,3>r)return[].concat(n);for(t=[],i=[],e=0;r>e;e++)i.push(e);for(e=0,o=r;o>3;){if(u=i[(e+0)%o],c=i[(e+1)%o],a=i[(e+2)%o],f=n[2*u],s=n[2*u+1],v=n[2*c],l=n[2*c+1],d=n[2*a],x=n[2*a+1],y=!1,b.sideLine(f,s,v,l,d,x)>=0){y=!0;for(var h=0;o>h;h++)if(g=i[h],g!=u&&g!=c&&g!=a&&b.colliTriPnt(f,s,v,l,d,x,n[2*g],n[2*g+1])){y=!1;break}}if(y)t.push(u,c,a),i.splice((e+1)%o,1),o--,e=0;else if(e++>3*o)break}return t.push(i[0],i[1],i[2]),t},b.slicePoly=function(n,t,i,e,o,u){var c=void 0,a=void 0,f=void 0,d=void 0,x=void 0,y=void 0,g=void 0,h=void 0,m=void 0,p=void 0,P=void 0,N=void 0,w=void 0,L=void 0,A=void 0,T=void 0,q=void 0,V=void 0,E=void 0;if(u=r(u,1e-10),u*=u,b.colliPolyPnt(n,t,i)||b.colliPolyPnt(n,e,o))return[n.slice(0)];for(c={x:t,y:i,flag:!1},a={x:e,y:o,flag:!1},d=[],x=[],y=0;y<n.length;y+=2)x.push({x:n[y],y:n[y+1],flag:!1});for(y=0;y<x.length;y++)f={x:0,y:0,flag:!1},f=b.intrLine(c.x,c.y,a.x,a.y,x[y].x,x[y].y,x[(y+1)%x.length].x,x[(y+1)%x.length].y,f.x,f.y),g=d[0]||{},h=d[d.length-1]||{},f.onLine1&&f.onLine2&&(!g.onLine1&&!g.onLine2||b.distPnt(f.x,f.y,g.x,g.y,!1)>u)&&(!h.onLine1&&!h.onLine2||b.distPnt(f.x,f.y,h.x,h.y,!1)>u)&&(f.flag=!0,d.push(f),x.splice(y+1,0,f),y++);if(d.length<2)return[n.slice(0)];for(rn=c,d.sort(s),V=[],E=0;d.length>0&&(m=d[0],p=d[1],P=x.indexOf(m),N=x.indexOf(p),w=!1,v(x,P)==N?w=!0:(m=d[1],p=d[0],P=x.indexOf(m),N=x.indexOf(p),v(x,P)==N&&(w=!0)),w?(E--,L=l(x,P,N),V.push(L),x=l(x,N,P),m.flag=p.flag=!1,d.splice(0,2),0===d.length&&V.push(x)):(E++,d.reverse()),1>=E););for(A=[],y=0;y<V.length;y++){T=V[y],q=[];for(var I=0;I<T.length;I++)q.push(T[I].x,T[I].y);A.push(q)}return A},b.areaPoly=function(n){for(var r=0,t=n.length,i=void 0,e=0;t>e;e+=2)t>0?(i=(e+2)%t,0>i&&(i+=t)):i=0,r+=n[e]*n[i+1]-n[e+1]*n[i];return w.abs(r/2)},b.centroidPoly=function(n){for(var r=0,t=0,i=void 0,e=void 0,o=void 0,u=void 0,c=void 0,a=void 0,f=0;f<n.length-2;f+=2)i=n[f],o=n[f+1],e=n[f+2],u=n[f+3],c=i*u-e*o,r+=(i+e)*c,t+=(o+u)*c;return i=n[n.length-2],o=n[n.length-1],e=n[0],u=n[1],c=i*u-e*o,r+=(i+e)*c,t+=(o+u)*c,a=b.areaPoly(n),r/=6*a,t/=6*a,{x:r,y:t}},b.convexHullPoly=function(n){var r=[],t=[],i=void 0;for(n.sort(function(n,r){return n[0]==r[0]?n[1]-r[1]:n[0]-r[0]}),i=0;i<n.length;i++){for(;r.length>=2&&b.sideLine(r[r.length-2][0],r[r.length-2][1],r[r.length-1][0],r[r.length-1][1],n[i][0],n[i][1])<=0;)r.pop();r.push(n[i])}for(i=n.length-1;i>=0;i--){for(;t.length>=2&&b.sideLine(t[t.length-2][0],t[t.length-2][1],t[t.length-1][0],t[t.length-1][1],n[i][0],n[i][1])<=0;)t.pop();t.push(n[i])}return t.pop(),r.pop(),r.concat(t)},b.distPolyRay=function(n,r,t,i,e){var o=n.length-2,u=tn[0],c=tn[1],a=tn[2],f=tn[3],s=tn[4],v=void 0;u.x=r,u.y=t,c.x=r+i,c.y=t+e;for(var l={dist:1/0,edge:0,norm_x:0,norm_y:0,refl_x:0,relf_y:0},x=0;o>x;x+=2)a.x=n[x],a.y=n[x+1],f.x=n[x+2],f.y=n[x+3],v=m(u,c,a,f,s),v&&d(i,e,u,a,f,s,x/2,l);return a.x=f.x,a.y=f.y,f.x=n[0],f.y=n[1],v=m(u,c,a,f,s),v&&d(i,e,u,a,f,s,n.length/2-1,l),l},b.intrPolyPnt=function(n,r,t){var i=n.length-2,e=void 0,o={dist:1/0,edge:0,point_x:0,point_y:0,norm_x:0,norm_y:0};tn[0].x=r,tn[0].y=t;for(var u=0;i>u;u+=2)tn[2].x=n[u],tn[2].y=n[u+1],tn[3].x=n[u+2],tn[3].y=n[u+3],x(tn[0],tn[2],tn[3],u>>1,o);return tn[2].x=tn[3].x,tn[2].y=tn[3].y,tn[3].x=n[0],tn[3].y=n[1],x(tn[0],tn[2],tn[3],i>>1,o),e=1/o.dist,o.norm_x=(r-o.point_x)*e,o.norm_y=(t-o.point_y)*e,o},b.reversePoly=function(n){for(var r=[],t=n.length-2;t>=0;t-=2)r.push(n[t],n[t+1]);return r},b.timeAccel=function(n,r,t){return(r-n)/t},b.accelAccel=function(n,r,t){return(r-n)/t},b.distAccel=function(n,r,t){return(r*r-n*n)/(2*t)},b.timeDistAccel=function(n,r,t){var i=n*n-4*t*-r*.5;if(0>i)return-1;var e=w.sqrt(i);return w.abs(w.max((-n+e)/t,(-n-e)/t))},w.pol=function(n,r){return{angle:b.getAngle(0,0,n,r),radial:b.distPnt(0,0,n,r,!0)}},w.rec=function(n,r,t,i){return{x:w.cos(i)*t+n,y:w.sin(i)*t+r}},w.normVec=function(n,r){var t=w.magVec(n,r,!0);return{x:n/t,y:r/t}},w.scaleVec=function(n,r,t){return{x:n*t,y:r*t}},w.truncVec=function(n,r,t){var i=t/w.magVec(n,r);return i=1>i?i:1,w.scaleVec(n,r,i)},w.magVec=function(n,r,t){var i=w.dotVec(n,r,n,r);return t?w.sqrt(i):i},w.dotVec=function(n,r,t,i){return n*t+r*i},w.crossVec=function(n,r,t,i){return n*i-r*t},w.projVec=function(n,r,t,i){return w.scaleVec(t,i,w.dotVec(n,r,t,i)/w.magVec(t,i,!1))},w.rejVec=function(n,r,t,i){var e=w.projVec(n,r,t,i);return{x:n-e.x,y:r-e.y}},w.perVec=function(n,r){return{x1:-r,y1:n,x2:r,y2:-n}},w.lerpVec=function(n,r,t,i,e){return{x:(t-n)*e+n,y:(i-r)*e+r}},w.headVec=function(n,r){return-w.atan2(-r,n)},w.revVec=function(n,r){return{x:-n,y:-r}},w.clockWiseVec=function(n,r,t,i){return-n*i+r*t>0},w.sinc=function(n){return A.isNaN(n)?NaN:A.isFinite(n)?0===n?1:w.sin(n*w.PI)/(n*w.PI):0},w.crd=function(n){return 2*w.sin(n/2)},w.exsec=function(n){return w.sec(n)-1},w.excsc=function(n){return w.csc(n)-1},w.aexsec=function(n){return w.asec(n+1)},w.aexcsc=function(n){return w.acsc(n+1)},w.vsin=function(n){return 1-w.cos(n)},w.vcos=function(n){return 1+w.cos(n)},w.cvsin=function(n){return 1-w.sin(n)},w.cvcos=function(n){return 1+w.sin(n)},w.hvsin=function(n){return w.vsin(n)/2},w.hvcos=function(n){return w.vcos(n)/2},w.hcvsin=function(n){return w.cvsin(n)/2},w.hcvcos=function(n){return w.cvcos(n)/2},w.avsin=function(n){return w.acos(1-n)},w.avcos=function(n){return w.acos(1+n)},w.acvsin=function(n){return w.asin(1-n)},w.acvcos=function(n){return w.asin(1+n)},w.ahvsin=function(n){return 2*w.asin(w.sqrt(n))},w.ahvcos=function(n){return 2*w.acos(w.sqrt(n))},w.csc=function(n){return 1/w.sin(n)},w.csch=function(n){return 1/w.sinh(n)},w.sec=function(n){return 1/w.cos(n)},w.sech=function(n){return 1/w.cosh(n)},w.cot=function(n){return 1/w.tan(n)},w.coth=function(n){return 1/w.tanh(n)},w.acsc=function(n){return 1/w.asin(n)},w.acsch=function(n){return 1/w.asinh(n)},w.asec=function(n){return 1/w.acos(n)},w.asech=function(n){return 1/w.acosh(n)},w.acot=function(n){return 1/w.atan(n)},w.acoth=function(n){return 1/w.atanh(n)},w.sincos=function(n){var r=w.sin(n);return[w.sqrt(1-r*r),r]},A.isPrime=function(n){return A.isNaN(n)||!A.isFinite(n)||2>n?!1:n==c(n)?!0:!1},A.isMinusZero=function(n){return 1/n===-(1/0)},A.isPower=function(n,t,i){i=r(i,w.precision(t));var e=w.ln(w.abs(n))/w.ln(w.abs(t));return 0>n&&0>t||n>0&&t>0?w.trunc(e,i)===e:n>0&&0>t?w.trunc(e,i)%2===0:!1},A.isEven=function(n){return A.isInteger(n)&&0===(1&n)},A.isNumeric=function(n){return!("[object Array]"===Object.prototype.toString.call(n)||n-parseFloat(n)+1<0)},A.epsilon=function(){return A.EPSILON?A.EPSILON:w.abs(1-3*nn)},N.inQuad=function(n){return n*n},N.outQuad=function(n){return n*(2-n)},N.inOutQuad=function(n){return.5>n?2*n*n:-1+(4-2*n)*n},N.inCubic=function(n){return w.pow(n,3)},N.outCubic=function(n){return(n-=1)*n*n+1},N.inOutCubic=function(n){return.5>n?4*w.pow(n,3):(n-1)*w.pow(2*n-2,2)+1},N.inQuart=function(n){return w.pow(n,4)},N.outQuart=function(n){return 1-(n-=1)*w.pow(n,3)},N.inOutQuart=function(n){return.5>n?8*w.pow(n,4):1-8*(n-=1)*w.pow(n,3)},N.inQuint=function(n){return w.pow(n,5)},N.outQuint=function(n){return 1+(n-=1)*w.pow(n,4)},N.inOutQuint=function(n){return.5>n?16*w.pow(n,5):1+16*(n-=1)*w.pow(n,4)},N.inPow=function(n,r){return w.pow(n,r)},N.outPow=function(n,r){var t=A.isEven(r-1)?1:-1;return 1+(n-=1)*w.pow(n,r-1)*t},N.inOutPow=function(n,r){var t=w.pow(2,r-1),i=A.isEven(r-1)?1:-1;return.5>n?t*w.pow(n,r):1+t*(n-=1)*w.pow(n,r-1)*i},N.inSine=function(n,r){return-w.pow(w.cos(n*w.HALFPI),r)+1},N.outSine=function(n,r){return w.pow(w.sin(n*w.HALFPI),r)},N.inOutSine=function(n,r){return(n*=2)<1?-.5*w.pow(w.cos(w.PI*n),r)+.5:.5*w.pow(w.cos(w.PI*(n-1)),r)+.5},N.inExpo=function(n){return 0===n?0:w.pow(2,10*(n-1))},N.outExpo=function(n){return 1===n?1:-w.pow(2,-10*n)+1},N.inOutExpo=function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*w.pow(2,10*(n-1)):.5*(-w.pow(2,-10*(n-=1))+2)},N.inCirc=function(n){return-(w.sqrt(1-n*n)-1)},N.outCirc=function(n){return w.sqrt(1-(n-=1)*n)},N.inOutCirc=function(n){return(n*=2)<1?-.5*(w.sqrt(1-n*n)-1):.5*(w.sqrt(1-(n-=2)*n)+1)},N.inElastic=function(n,t,i){var e=void 0;return t=r(t,.1),i=r(i,.1),0===n?0:1===n?1:(1>t?(t=1,e=i/4):e=i*w.asin(1/t)/w.TAU,-(t*w.pow(2,10*(n-=1))*w.sin((n-e)*w.TAU/i)))},N.outElastic=function(n,t,i){var e=void 0;return t=r(t,.1),i=r(i,.1),0===n?0:1===n?1:(1>t?(t=1,e=i/4):e=i*w.asin(1/t)/w.TAU,t*w.pow(2,-10*n)*w.sin((n-e)*w.TAU/i)+1)},N.inOutElastic=function(n,t,i){var e=void 0;return t=r(t,.1),i=r(i,.1),0===n?0:1===n?1:(1>t?(t=1,e=i/4):e=i*w.asin(1/t)/w.TAU,(n*=2)<1?-.5*(t*w.pow(2,10*(n-=1))*w.sin((n-e)*w.TAU/i)):t*w.pow(2,-10*(n-=1))*w.sin((n-e)*w.TAU/i)*.5+1)},N.inBack=function(n,r){return r=void 0==r?1.70158:a(r),1*n*n*((r+1)*n-r)},N.outBack=function(n,r){return r=void 0==r?1.70158:a(r),1*((n-=1)*n*((r+1)*n+r)+1)},N.inOutBack=function(n,r){return r=void 0==r?1.70158:a(r),(n*=2)<1?.5*(n*n*(((r*=1.525)+1)*n-r)):.5*((n-=2)*n*(((r*=1.525)+1)*n+r)+2)},N.inBounce=function(n){return 1-this.outBounce(1-n)},N.outBounce=function(n){return n<R[0]?7.5625*n*n:n<R[1]?7.5625*(n-=R[2])*n+.75:n<R[3]?7.5625*(n-=R[4])*n+.9375:7.5625*(n-=R[5])*n+.984375},N.inOutBounce=function(n){return.5>n?.5*this.inBounce(2*n):.5*this.outBounce(2*n-1)+.5},N.smoothStep=function(n,r){if(0>r)return 0;switch(r){case 1:return an(n,2)*(3-2*n);case 2:return an(n,3)*(n*(6*n-15)+10);case 3:return an(n,4)*(35+n*(-84+(70-20*n)*n));case 4:return an(n,5)*(126+5*n*(-84+n*(108+7*n*(-9+2*n))));case 5:return an(n,6)*(462+n*(-1980-7*n*(-495+2*n*(220+9*n*(-11+2*n)))));case 6:return an(n,7)*(1716+7*n*(-1287+2*n*(1430+3*n*(-572+n*(390+11*n*(-13+2*n))))));default:for(var t=0,i=0;r>=i;i++)t+=w.nCr(-r-1,i)*w.nCr(2*r+1,r-i)*w.pow(n,r+i+1);return t}},N.overShoot=function(n,r){return n=N.outQuad(n),n*(1+w.sin(n*w.PI)*r)},N.poly=function(n,r,t){for(var i=0,e=void 0,o=0;o<r.length;o+=2){e=1;for(var u=0;u<r.length;u+=2)u!==o&&(e*=(n-r[u])/(r[o]-r[u]));i+=r[o+1]*w.pow(e,t[o/2])}return i},N.bezier=function(n,r,t){for(var i=0,e=0,o=0,u=0,c=r.length,a=0;c>a;a++)e=f(n,a,c-1)*t[a],i=e*r[a],o+=i,u+=e;return o/u},N.spline=function(n,r,t,i,e,o){var u=[],c=void 0,a=void 0,f=void 0,s=void 0,v=void 0,l=void 0,d=void 0,x=void 0,y=void 0,g=void 0,h=void 0;for(e=o?[].concat(e[e.length-2],e[e.length-1],e,e[0],e[1],e[2],e[3]):[].concat(e[e.length-2],e[e.length-1],e,e[0],e[1]),c=(1-t)*(1+r)*(1-n)*.5,a=(1-t)*(1-r)*(1+n)*.5,f=(1-t)*(1+r)*(1+n)*.5,s=(1-t)*(1-r)*(1-n)*.5,y=2;y<e.length-2;)v=e[y]-e[y-2],l=e[y+1]-e[y-1],d=e[y+2]-e[y],x=e[y+3]-e[y+1],u.push(c*v+a*d,c*l+a*x,f*v+s*d,f*l+s*x),y+=2;for(y=2,h=[];y<e.length-4;){for(h.push(e[y],e[y+1]),g=i;1>g;)d=g*g,x=2*g,c=(x-3)*d+1,f=(3-x)*d,x=g-1,a=x*x*g,s=x*d,v=c*e[y]+a*u[2*y-2]+f*e[y+2]+s*u[2*y],l=c*e[y+1]+a*u[2*y-1]+f*e[y+3]+s*u[2*y+1],h.push(v,l),g+=i;h.push(e[y+2],e[y+3]),y+=2}return h},N.count=function(){var n=void 0;return function(t,i,e,o,u){o||(o=t);var c={min:t,max:i,change:e,next:o,current:o,mode:u};return c.change<0?c.next=r(c.next,c.max):c.change>0&&(c.next=r(c.next,c.min)),function(r,t,i,e,o,u){switch("number"==typeof t&&(c.min=t),"number"==typeof i&&(c.max=i),"number"==typeof e&&(c.change=e),"number"==typeof o&&(c.next=o),"number"==typeof u&&(c.mode=u),c.current=c.next,c.mode){case 1:c.next+=c.change,c.change<0&&c.next<c.min?c.next+=c.max-c.min:c.change>0&&c.next>c.max&&(c.next-=c.max-c.min);break;case 2:c.change<0?c.next>c.min?(c.next+=c.change,c.next<c.min&&(c.next=c.min)):c.next=c.max:c.change>0&&(c.next<c.max?(c.next+=c.change,c.next>c.max&&(c.next=c.max)):c.next=c.min);break;case 3:c.change<0&&c.next<c.min?(c.change*=-1,n=c.min-c.next,c.next=c.min,c.next+=c.change-(c.change-n),c.current=c.next):c.next>c.max&&(c.change*=-1,n=c.max-c.next,c.next=c.max,c.next+=c.change-(c.change-n),c.current=c.next),c.next+=c.change;break;case 4:c.change<0&&c.next<=c.min?(c.change*=-1,c.next=c.min,c.current=c.next):c.next<c.max||(c.change*=-1,c.next=c.max,c.current=c.next),c.next+=c.change;break;case 5:if(c.change<0&&c.next<=c.min){c.change*=-1,c.next+=c.change,c.current=c.min;break}c.next<c.max||(c.change*=-1,c.next+=c.change,c.current=c.max),c.next+=c.change;break;default:c.change<0?c.next>c.min?c.next+=c.change:(c.next=c.min,c.current=c.next):c.change>0&&(c.next<c.max?c.next+=c.change:(c.next=c.max,c.current=c.max))}return r?c:c.current}}}(),L.andNot=function(n,r){return!n&&r},L.notAnd=function(n,r){return n&&!r},L.nand=function(n,r){return!(n&&r)},L.orNot=function(n,r){return n||!r},L.notOr=function(n,r){return!n||r},L.nor=function(n,r){return!(n||r)},L.xor=function(n,r){return n?!r:r},L.xnor=function(n,r){return!L.xor(n,r)},L.all=function(n){for(var r=0;r<n.length;r++){if(1!=n[r])return!1;if(r>=n.length-1)return!0}},L.nall=function(n){for(var r=0;r<n.length;r++)if(1==n[r])return!0;return!1};var vn={Math:w,Geometry:b,Tween:N,Boolean:L,Number:A};"function"==typeof define&&define.amd?define([],function(){return vn}):("object"===("undefined"==typeof module?"undefined":P(module))&&module.exports&&(module.exports=vn),n.Geometry=b,n.Tween=N)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0);
