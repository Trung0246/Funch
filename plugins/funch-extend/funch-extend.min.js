/*
	https://github.com/Trung0246/Funch/
	funch-extend.js v0.2a
	Require funch.js v0.28
*/
(function(u,n){u=u.bind(this,n);"function"===typeof define&&define.amd?define(["funch"],function(n){n._PLUGINS_(u)}):"object"===typeof module&&module.exports?module.exports=u:n._FUNCH_PLUGINS_(u)})(function(u,n,w){function x(a,b){for(var c={},d=Object.getOwnPropertyNames(a),k=0;k<d.length;k++)c[d[k]]=a[d[k]];Object.assign(c,b);return c}function v(a,b,c,d,k,r,l,h){h=n.helper1(h,!0);var g=a*a+b*b+c*c;g>l*l&&(g=f.sqrt(g),1>g&&(g=1),a=a/g*l,b=b/g*l,c=c/g*l);h.x=a-d;h.y=b-k;h.z=c-r;return h}function y(a,b,c,d,k,r,l,h,g,e,m){a=d-a;b=k-b;c=r-c;e=f.sqrt(a*a+b*b+c*c)/e;1>e&&(e=1);m.x=d+l*e;m.y=k+h*e;m.z=r+g*e;return m}function z(a,b,c,d,k,r,l,h,g,e,m){m=n.helper1(m,!0);var p=f.sqrt(a*a+b*b+c*c);0>=p?c=b=a=p=0:(a/=p,b/=p,c/=p);p<l?h=e?(l-p)/l*(g-h)+h:p/l*g:e||(h=g);m.x=a*h-d;m.y=b*h-k;m.z=c*h-r;return m}function A(a,b,c,d,k){d/=f.sqrt(a*a+b*b+c*c);d=1>d?d:1;k.x=a*d;k.y=b*d;k.z=c*d;return k}var f=x(u.Math,w.Math);x(u.Number,w.Number);x(u.Boolean,w.Boolean);var B=2/f.PI;return["M","QTR_PI",f.HALF_PI/2,"M","GRAVITY",9.80665223,"G","gravity",function(a){a=f.sin(a);a*=a;return 9.7803267714*((1+.00193185138639*a)/f.sqrt(1-.00669437999013*a))},"G","rotPnt3D",function(a,b,c,d,k,r,l,h){h=n.helper1(h,!0);if(void 0!==d){var g=f.sin(d);d=f.cos(d);if(l)b=b*d+c*g,c=b*g-c*d;else{var e=b*g+c*d;b=b*d-c*g;c=e}}void 0!==k&&(e=a,g=f.sin(k),d=f.cos(k),l?(a=a*d+c*g,c=e*g-c*d):(e=c*d-a*g,a=c*g+a*d,c=e));void 0!==r&&(e=a,g=f.sin(r),d=f.cos(r),l?(a=a*d-b*g,b=e*g+b*d):(e=a*g+b*d,a=a*d-b*g,b=e));h.x=a;h.y=b;h.z=c;return h},"M","pol3D",function(a,b,c,d){d=n.helper1(d,!0);d.radial=f.sqrt(a*a+b*b+c*c);d.angle1=f.atan2(f.sqrt(a*a+b*b),c);d.angle2=f.atan2(b,a);return d},"M","rec3D",function(a,b,c,d){var k=f.sin(b)*a;d=n.helper1(d,!0);d.x=k*f.cos(c);d.y=k*f.sin(c);d.z=a*f.cos(b);return d},"M","pol3D2",function(a,b,c){c=n.helper1(c,!0);c.x=f.sin(a*f.PI)*f.cos(b*f.HALF_PI);c.y=f.sin(-b*f.HALF_PI);return c},"M","rec3D2",function(a,b,c){c=n.helper1(c,!0);c.y=-B*f.asin(b);c.x=f.asin(a*f.sec(c.y*f.HALF_PI))/f.PI;return c},"M","vrltVec",function(a,b,c,d,k,r,l,h,g,e){h=n.helper0(h,2);power2=n.helper0(power2,1);e=n.helper1(e,!0);var m=a-d,p=b-k;g=c-r;var t=f.sqrt(m*m+p*p+g*g);l=(l-t)/(t*h)*power2;h=m*l;p*=l;g*=l;e.x1=a+h;e.y1=b+p;e.z1=c+g;e.x2=d-h;e.y2=k-p;e.z2=r-g;return e},"M","updateSteer",function(a,b,c,d,k,f,l,h,g,e){e=n.helper1(e,!0);A(a,b,c,l,e);e.x/=h;e.y/=h;e.z/=h;e.x+=d;e.y+=k;e.z+=f;return A(e.x,e.y,e.z,g,e)},"M","seekSteer",function(a,b,c,d,k,f,l,h,g,e,m){return v(d-a,k-b,f-c,l,h,g,e,m)},"M","fleeSteer",function(a,b,c,d,k,f,l,h,g,e,m){return v(a-d,b-k,c-f,l,h,g,e,m)},"M","pursuitSteer",function(a,b,c,d,k,f,l,h,g,e,m,p,t,q){q=n.helper1(q,!0);y(a,b,c,d,k,f,e,m,p,t,q);v(q.x-a,q.y-b,q.z-c,l,h,g,t,q);return q},"M","arrivalSteer",function(a,b,c,d,k,f,l,h,g,e,m,p){return z(d-a,k-b,f-c,l,h,g,e,void 0,m,!1,p)},"M","awaySteer",function(a,b,c,d,f,n,l,h,g,e,m,p,t){return z(a-d,b-f,c-n,l,h,g,e,m,p,!0,t)},"M","evadeSteer",function(a,b,c,d,f,r,l,h,g,e,m,p,t,q){q=n.helper1(q,!0);y(a,b,c,d,f,r,e,m,p,t,q);v(a-q.x,b-q.y,c-q.z,l,h,g,t,q);return q},"T","inAtan",function(a,b){b=n.helper0(b,15);return f.atan((a-1)*b)/f.atan(b)+1},"T","outAtan",function(a,b){b=n.helper0(b,15);return f.atan(a*b)/f.atan(b)},"T","inOutAtan",function(a,b){b=n.helper0(b,15);return f.atan((a-.5)*b)/(2*f.atan(b/2))+.5},"T","mix",function(a,b,c){if(a>c[c.length-1])return b[b.length-1](a);if(a<c[0])return b[0](a);for(var d,k=0;k<c.length;k+=1)if(c[k]<=a&&a<=c[k+1])return d=2*k,c=b[d+1](f.norm(a,c[k],c[k+1])),b[d+2](a)*c+b[d](a)*(1-c);return 1},"T","bilinear",function(a,b,c,d,f,n,l,h,g,e){var k=1/((f-c)*(n-d));c=(a-c)*k;a=(f-a)*k;d=b-d;b=n-b;return l*a*b+h*c*b+g*a*d+e*c*d}]},"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:this);
