/*
	https://github.com/Trung0246/Funch/
  funch-extend.js v0.1a
	Require funch.js v0.27
*/
(function(r,q){r=r.bind(this,q);"function"===typeof define&&define.amd?define(["funch"],function(q){q._PLUGINS_(r)}):"object"===typeof module&&module.exports?module.exports=r:q._FUNCH_PLUGINS_(r)})(function(r,q,u){function v(a,d,c,b,g,n,h,f){f=q.helper1(f,!0);var k=a*a+d*d+c*c;k>h*h&&(k=l.sqrt(k),1>k&&(k=1),a=a/k*h,d=d/k*h,c=c/k*h);f.x=a-b;f.y=d-g;f.z=c-n;return f}function w(a,d,c,b,g,n,h,f,k,e,m){a=b-a;d=g-d;c=n-c;e=l.sqrt(a*a+d*d+c*c)/e;1>e&&(e=1);m.x=b+h*e;m.y=g+f*e;m.z=n+k*e;return m}function x(a,d,c,b,g,n,h,f,k,e,m){m=q.helper1(m,!0);var t=l.sqrt(a*a+d*d+c*c);1>t&&(t=1);t<h?f=e?(h-t)/h*(k-f)+f:t/h*k:e||(f=k);m.x=a/t*f-b;m.y=d/t*f-g;m.z=c/t*f-n;return m}function y(a,d,c,b,g){b/=l.sqrt(a*a+d*d+c*c);b=1>b?b:1;g.x=a*b;g.y=d*b;g.z=c*b;return g}var l=r.Math;return["M","QTR_PI",u.Math.HALF_PI/2,"M","GRAVITY",9.80665223,"G","gravity",function(a){a=l.sin(a);a*=a;return 9.7803267714*((1+.00193185138639*a)/l.sqrt(1-.00669437999013*a))},"G","rotPnt3D",function(a,d,c,b,g,n,h){var f=l.sin(b);b=l.cos(b);h=q.helper1(h,!0);d=d*b+c*f;c=d*f-c*b;var k=a;f=l.sin(g);b=l.cos(g);a=a*b+c*f;c=k*f-c*b;f=l.sin(n);b=l.cos(n);h.x=a*b-d*f;h.y=a*f+d*b;h.z=c;return h},"M","pol3D",function(a,d,c,b){b=q.helper1(b,!0);b.radial=l.sqrt(a*a+d*d+c*c);b.angle1=l.atan2(l.sqrt(a*a+d*d),c);b.angle2=l.atan2(d,a);return b},"M","rec3D",function(a,d,c,b){var g=l.sin(d)*a;b=q.helper1(b,!0);b.x=g*l.cos(c);b.y=g*l.sin(c);b.z=a*l.cos(d);return b},"M","updateSteer",function(a,d,c,b,g,n,h,f,k,e){e=q.helper1(e,!0);y(a,d,c,h,e);e.x/=f;e.y/=f;e.z/=f;e.x+=b;e.y+=g;e.z+=n;return y(e.x,e.y,e.z,k,e)},"M","seekSteer",function(a,d,c,b,g,n,h,f,k,e,m){return v(b-a,g-d,n-c,h,f,k,e,m)},"M","fleeSteer",function(a,d,c,b,g,n,h,f,k,e,m){return v(a-b,d-g,c-n,h,f,k,e,m)},"M","pursuitSteer",function(a,d,c,b,g,n,h,f,k,e,m,l,r,p){p=q.helper1(p,!0);w(a,d,c,b,g,n,e,m,l,r,p);v(p.x-a,p.y-d,p.z-c,h,f,k,r,p);return p},"M","arrivalSteer",function(a,d,c,b,g,n,h,f,k,e,m,l){return x(b-a,g-d,n-c,h,f,k,e,void 0,m,!1,l)},"M","awaySteer",function(a,d,c,b,g,n,h,f,k,e,m,l,q){return x(a-b,d-g,c-n,h,f,k,e,m,l,!0,q)},"M","evadeSteer",function(a,d,c,b,g,l,h,f,k,e,m,r,u,p){p=q.helper1(p,!0);w(a,d,c,b,g,l,e,m,r,u,p);v(a-p.x,d-p.y,c-p.z,h,f,k,u,p);return p},"T","mix",function(a,d,c){if(a>c[c.length-1])return d[d.length-1](a);if(a<c[0])return d[0](a);for(var b,g=0;g<c.length;g+=1)if(c[g]<=a&&a<=c[g+1])return b=2*g,tempT=d[b+1](u.Math.norm(a,c[g],c[g+1])),d[b+2](a)*tempT+d[b](a)*(1-tempT);return 1},"T","bilinear",function(a,d,c,b,g,l,h,f,k,e){var m=1/((g-c)*(l-b));c=(a-c)*m;a=(g-a)*m;b=d-b;d=l-d;return h*a*d+f*c*d+k*a*b+e*c*b}]},"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:this);
